#!/bin/bash
################################## !!! README !!! #######################################
#                                                                                       #
# Script name: vdr_2.4.6_installer                                                      #
# Version: 2.4.6 Repository Master (https://github.com/fiveten59/Vdr_installer)        #
# Tested on Ubuntu 18.04 & 20.04                                                               #
# chmod the script                                                                      #
# then load it simply typing: sudo ./vdr_2.4.6_installer                                #
#                                                                                       #
#########################################################################################
#
PLUGIN="--lirc -P'dvbapi' -P'epgsearch' -P'skindesigner -l /etc/vdr/logos/ -i /etc/vdr/plugins/skindesigner/skins/' -P'iptv' -P'radio -l /etc/vdr/plugins/radio/radio-OnAir1080.mpg' -P'skinnopacity -l /etc/vdr/logos/' -P'weatherforecast' -P'externalplayer' -P'channelscan' -P'systeminfo'"
#    
#
ETC='/usr/local/etc'
SRC='/usr/local/src'
SRCVDR='/usr/local/src/vdr-2.4.6'
VDRSRC=''$SRC'/vdr/PLUGINS/src'
LIB='/usr/lib/vdr/plugins'
VDR='vdr-2.4.6'
PACKAGES="/usr/local/src/packages"
TEMP='/tmp'
SKINS='/etc/vdr/plugins/skindesigner/skins/'
SHARE='/usr/share/vdr/plugins'
PLUGINS='/etc/vdr/plugins'
Remind3='is already installed'
Remind4='are already installed'
Remind5='is not installed'
ALLOWED="#
# allowed_hosts.conf  This file describes a number of host addresses that
#                     are allowed to connect to the streamdev/vn****rver/xvdr/xineliboutput server running 
#                     with the Video Disk Recorder (VDR) on this system.
# Syntax:
#
# IP-Address[/Netmask]
#
127.0.0.1             # always accept localhost
192.168.1.0/24        # any host on the local net
192.168.0.0/24        # any host on the local net
#204.152.189.113      # a specific host
#0.0.0.0/0            # any host on any net (USE THIS WITH CARE!)
#
#
# If your network setup is correct pls don't touch
# exit with CTRL+X
#
# If your network setup is diiferent change it and
# Save it with CTRL+O and exit with CTRL+X "
#
#               Disecq
#
MONO9="#
# Full DiSEqC sequence:
# Eutelsat 9 - 9.0°E 
S9.0E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S9.0E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S9.0E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S9.0E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"

MONO13="#
# Full DiSEqC sequence:
# Hotbird - 13.0°E
S13.0E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S13.0E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S13.0E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
MONO19="#
# Full DiSEqC sequence:
# Astra 19 - 19.2°E
S19.2E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S19.2E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S19.2E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S19.2E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
MONO23="#
# Full DiSEqC sequence:
# Astra 23 - 23°E
S23.0E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S23.0E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S23.0E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S23.0E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
MONO28="#
# Full DiSEqC sequence:
# Astra 28 - 28.2°E
S28.2E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S28.2E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S28.2E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S28.2E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
MONO08W="#
# Full DiSEqC sequence:
# Thor - 0.8°W
S0.8W 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S0.8W  99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S0.8W  11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S0.8W  99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
MONO5W="#
# Full DiSEqC sequence:
# Eutelsat 5 - 5°W
S5.0W 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S5.0W 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S5.0W 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S5.0W 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
DUAL="#
# Full DiSEqC sequence:
# 13 - 19.2E
S13.0E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S13.0E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S13.0E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T

S19.2E  11700 V  9750  t v W15 [E0 10 38 F4] W15 B W15 t
S19.2E  99999 V 10600  t v W15 [E0 10 38 F5] W15 B W15 T
S19.2E  11700 H  9750  t V W15 [E0 10 38 F6] W15 B W15 t
S19.2E  99999 H 10600  t V W15 [E0 10 38 F7] W15 B W15 T
#
"
TRIAL="# Full DiSEqC sequence:
# 9 - 13 - 19.2E
S9E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S9E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S9E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S9E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S13.0E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S13.0E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S13.0E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S13.0E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S19.2E 11700 V  9750 t v W15 [E0 10 38 F8] W15 A W15 t
S19.2E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S19.2E 11700 H  9750 t V W15 [E0 10 38 FA] W15 A W15 t
S19.2E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T
#
"
TRIAL2="# Full DiSEqC sequence:
# 13 - 16 - 19.2E
S13.0E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S13.0E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S13.0E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S16.0E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S16.0E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S16.0E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S16.0E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S19.2E 11700 V 9750 t v W15 [E0 10 38 F8] W15 A W15 t
S19.2E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S19.2E 11700 H 9750 t V W15 [E0 10 38 FA] W15 A W15 t
S19.2E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T
#
"
QUADRI="# Full DiSEqC sequence:
# 13 - 19 - 23.5 - 28.2°E
S13.0E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S13.0E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S13.0E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S19.2E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S19.2E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S19.2E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S19.2E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S23.5E 11700 V  9750 t v W15 [E0 10 38 F8] W15 A W15 t
S23.5E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S23.5E 11700 H  9750 t V W15 [E0 10 38 FA] W15 A W15 t
S23.5E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T

S28.2E  11700 V  9750  t v W15 [E0 10 38 FC] W15 B W15 t
S28.2E  99999 V 10600  t v W15 [E0 10 38 FD] W15 B W15 T
S28.2E  11700 H  9750  t V W15 [E0 10 38 FE] W15 B W15 t
S28.2E  99999 H 10600  t V W15 [E0 10 38 FF] W15 B W15 T
#
"
QUADRI2="# Full DiSEqC sequence:
# 9 - 13 - 16 - 19.2°E
S9E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S9E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S9E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S9E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S13.0E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S13.0E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S13.0E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S13.0E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S16.0E 11700 V  9750 t v W15 [E0 10 38 F8] W15 A W15 t
S16.0E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S16.0E 11700 H  9750 t V W15 [E0 10 38 FA] W15 A W15 t
S16.0E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T

S19.2E  11700 V  9750  t v W15 [E0 10 38 FC] W15 B W15 t
S19.2E  99999 V 10600  t v W15 [E0 10 38 FD] W15 B W15 T
S19.2E  11700 H  9750  t V W15 [E0 10 38 FE] W15 B W15 t
S19.2E  99999 H 10600  t V W15 [E0 10 38 FF] W15 B W15 T
#
"
# 
apt-get -y install dialog git cvs wget checkinstall yasm mercurial unzip
apt-get -y install autoconf autopoint automake build-essential cmake libtool ;
apt-get -y install libxcb1-dev libxcb-shm0-dev libxcb-xfixes0-dev  pkg-config texinfo;
    #
    exit_status_check()
    {
    if [ $? -ne 0 ]; then
    echo "Install did not run successfully";
    echo "                    Press Enter to continue ...               "; read enterKey; exit 1
   else
   echo "Install successful"
    fi   
    }

    press_enter()
    {
     echo "                    Press Enter to continue ...               "; read enterKey; exit 0
    }

    timer_start()
    {
    BEGIN=$(date +%s)
    }


    timer_stop()
    {
    NOW=$(date +%s)
    let DIFF=$(($NOW - $BEGIN))
    let MINS=$(($DIFF / 60))
    let SECS=$(($DIFF % 60))
    echo Time elapsed: $MINS:`printf %02d $SECS` >> $LOGFILE
    }

    line()
    {
    echo "-----------------------------------" >> $LOGFILE
    }
    # Make sure only root can run the script
    if [ "$(id -u)" != "0" ]; then
    echo "This script must be run as root" 1>&2
    exit 1
    fi
  
    

#############################################################################################################################  
#############################################################################################################################

                                          #########################################
                                          #                  MENU'                #
                                          #########################################


mkdir $SRC/packages
dialog --title " VDR 2.4.6 Installer " --infobox "Copyright (C) 2020
                                                                       
    This file is part of VDR Complete Installer (VCI).                   
                                                                        
    VCI is free software: you can redistribute it and/or modify          
    it under the terms of the GNU General Public License as published by 
    the Free Software Foundation, either version 3 of the License, or    
    (at your option) any later version.                                  
                                                                        
    VCI is distributed in the hope that it will be useful,               
    but WITHOUT ANY WARRANTY; without even the implied warranty of       
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the        
    GNU General Public License for more details.                         
                                                                        
    You should have received a copy of the GNU General Public License    
    along with VCI. see the file VCI_License.GPL, If not see             
    <http://www.gnu.org/licenses/>.                                   


    A special thanks goes to Klaus Schmidinger Vdr Developer     
    
    Script name: vdr_2.4.6_installer
    Version:2.4.6  (https:/github.com/fiveten59/Vdr_installer)
    Tested on Ubuntu 18.04 & 20.04
    chmod the script
    then load it simply typing: sudo ./vdr_2.4.6_installer " 0 0
    
    
    echo "                    Press Enter to continue ...               "; read enterKey
    

###########################################################################################################
#
#
clear
while :
do
echo ""
dialog --title "   ♦♦♦♦♦   VDR 2.4.6 Version Installer Script - Libraries & Codec  ♦♦♦♦♦   " --infobox "
          ╭===========================================================================================╮    
          |   ................♦♦♦   Download & Upgrade Local Repository   ♦♦♦...................  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [1]    +[Submenu] ~~  Local Repository Directory ~  Install - Upgrade  .............  |
          |   =======================================================================================   |
          |   ..........♦♦♦   Audio Video & Codec Libraries - Install & Uninstall  ♦♦♦........  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [2]    +[Submenu] ~~ Libs For Intel & Nvidia Devices   ...............................  |
          |   =======================================================================================   |
          |   .............♦♦♦                        VDR - Plugins  - Skin               ♦♦♦.........  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [3]    +[Submenu] ~~  VDR & Plugins .................................................... |
          |   =======================================================================================   |
          |   .............♦♦♦                    Channells Lists Setup                 ♦♦♦........  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [4]    +[Submenu] ~~  Channells Lists ~ Install ~ Uninstall  ...........................  |
          |   =======================================================================================   |
          |   .............................♦♦♦  KODI Setup  ♦♦♦.............................  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [5]    +[Submenu] ~~  Kodi Media Center ~ Install ~ Uninstall  .......................  |
          |   =======================================================================================   |
          |   .............................♦♦♦   Exit Setup Menu   ♦♦♦.......................  |          
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |              
          |   [6]     Exit  ..........................................................................  |  
          ╰===========================================================================================╯" 0 0

echo -n "              Enter your menu choice = Submenu [1~5] -- Exit [6] :        "
read yourch
case $yourch in


#############################################################################################################################  
#############################################################################################################################

1)                                        #########################################
                                          #            Local Repository           #
                                          #########################################

cd /home/`logname`; mkdir -p Vdrrepo; chmod -R 777 Vdrrepo; cd Vdrrepo;
clear
dialog --title "   ** Download & Upgrade Local Repository **   " --infobox "
   ---------------------------------------------------------------------------------------------
       Install ~ Upgrade ~ Remove ~ Local Repository 
   ---------------------------------------------------------------------------------------------
        [a]  Install Intel Video devices libraries (If Not Exist)         
        [b]  Install libs & progs for Vdr - Intel & Nvidia Video devices (If Not Exist) 
        [c]  Remove & Upgrade all      
        
        [z]  Skip      

   ---------------------------------------------------------------------------------------------" 0 0
echo -n "        Enter your menu choice = Install [a-b]  ~~ Remove & Upgrade [c] ~~ Skip [z]:      "
read yourch
case $yourch in

############################### Download libraries on local repo ###################################
a) clear;

			echo " Downloading Intel Video devices libraries on local repo "
			
if [ -e /home/`logname`/Vdrrepo/cmrt ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/cmrt
  fi

if [ -e /home/`logname`/Vdrrepo/libva ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/libva;
  fi

if [ -e /home/`logname`/Vdrrepo/intel-hybrid-driver ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/01org/intel-hybrid-driver
  fi

if [ -e /home/`logname`/Vdrrepo/intel-vaapi-driver ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it Download ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/intel-vaapi-driver.git
  fi

if [ -e /home/`logname`/Vdrrepo/libva-utils ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/libva-utils
  fi;;

################################ Download ommon libraries on local repo ##############################

b) clear;
			echo " Downloading libs & progs for Vdr - Intel & Nvidia Video devices on local repo "

if [ -e /home/`logname`/Vdrrepo/nasm-2.15rc12.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.nasm.us/pub/nasm/releasebuilds/2.15rc12/nasm-2.15rc12.tar.bz2;
  fi

if [ -e /home/`logname`/Vdrrepo/x264 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://code.videolan.org/videolan/x264.git;
  fi 

if [ -e /home/`logname`/Vdrrepo/x265 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    hg clone http://hg.videolan.org/x265;
  fi

if [ -e /home/`logname`/Vdrrepo/fdk-aac ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/mstorsjo/fdk-aac.git;
  fi

if [ -e /home/`logname`/Vdrrepo/libvpx ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/webmproject/libvpx/
  fi

if [ -e /home/`logname`/Vdrrepo/libvorbis-1.3.7.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://ftp.osuosl.org/pub/xiph/releases/vorbis/libvorbis-1.3.7.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/ffmpeg-4.3.1.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
 echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://ffmpeg.org/releases/ffmpeg-4.3.1.tar.bz2;
  fi

################################ Download Vdr and Plugins on local repo ##############################

			echo " Downloading Vdr and Plugins on local repo "

if [ -e /home/`logname`/Vdrrepo/vdr-2.4.6.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget ftp://ftp.tvdr.de/vdr/vdr-2.4.6.tar.bz2;
  fi

if [ -e /home/`logname`/Vdrrepo/vdr-patches.2.4.6.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/bblslie14bgd9ni/vdr-patches.2.4.6.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/Make.config.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/qds2k91od7oboed/Make.config.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/vdrsymbols.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/bx97ikp7c1h2qj2/vdrsymbols.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-dvbapi ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://github.com/manio/vdr-plugin-dvbapi.git; 
  fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-dvbapi ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://github.com/manio/vdr-plugin-dvbapi.git; 
  fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-epgsearch ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone http://projects.vdr-developer.org/git/vdr-plugin-epgsearch.git;
  fi

if [ -e /home/`logname`/Vdrrepo/patch_epgsearch.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/s9vggu8mil8ss7t/patch_epgsearch.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-iptv ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/rofafor/vdr-plugin-iptv.git; 
  fi

if [ -e /home/`logname`/Vdrrepo/patch_iptv.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"; 
    wget https://www.dropbox.com/s/nof5ydmxrplw2b0/patch_iptv.tar.gz;
fi

if [ -e /home/`logname`/Vdrrepo/iptv_conf.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"; 
    wget https://www.dropbox.com/s/vmhkf4rzhoh4wa5/iptv_conf.tar.gz;
fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-radio-master.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/dv6okhltz3eu20i/vdr-plugin-radio-master.tar.gz;
fi

if [ -e /home/`logname`/Vdrrepo/vdr-externalplayer-0.3.5.tgz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.uli-eckhardt.de/vdr/download/vdr-externalplayer-0.3.5.tgz;
fi

if [ -e /home/`logname`/Vdrrepo/externalplayer.conf.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/vhz1fz68159s0qg/externalplayer.conf.tar.gz;
fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-mpv ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/ua0lnj/vdr-plugin-mpv.git;
fi

if [ -e /home/`logname`/Vdrrepo/vdr-plugin-weatherforecast ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://projects.vdr-developer.org/vdr-plugin-weatherforecast.git;
fi    

if [ -e /home/`logname`/Vdrrepo/patch_weatherforecast.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File Presente ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File non Presente ... Eseguo il Download ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/v0ipkt6x3bfbbs8/patch_weatherforecast.tar.gz;
fi

if [ -e /home/`logname`/Vdrrepo/channelscan ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://bitbucket.org/ua0lnj/channelscan.git;    
fi

if [ -e /home/`logname`/Vdrrepo/satellite_pack.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/400whbxq4tzsbtq/satellite_pack.tar.gz;    
fi

if [ -e /home/`logname`/Vdrrepo/vdr-systeminfo-0.1.5.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget http://firefly.vdr-developer.org/systeminfo/vdr-systeminfo-0.1.5.tar.bz2;
fi

################################# Download skins ########################################

			echo " Downloading skins "

if [ -e /home/`logname`/Vdrrepo/skindesigner ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
     git clone https://gitlab.com/kamel5/skindesigner.git;
  fi 
  
if [ -e /home/`logname`/Vdrrepo/SkinNopacity ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://gitlab.com/kamel5/SkinNopacity.git;
  fi

if [ -e /home/`logname`/Vdrrepo/logos.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/6bdejeummyv0p3f/logos.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/icone.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/5uvx468b4b87auy/icone.tar.gz;
  fi
    
if [ -e /home/`logname`/Vdrrepo/lcars_pack.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/806odyj5vyco3dg/lcars_pack.tar.gz;
  fi 

if [ -e /home/`logname`/Vdrrepo/picon.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/hb2mv9ytz5q6yz7/picon.tar.gz;
  fi

############################# Download others ##############################

			echo " Downloading others "

if [ -e /home/`logname`/Vdrrepo/traduzioni.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/6hzpdx9yv5ypzxv/traduzioni.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/oscam.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/56oomdr58os7msa/oscam.tar.gz;
  fi

if [ -e /home/`logname`/Vdrrepo/oscam64.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not found ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/d3bn3ig8b3q2xp7/oscam64.tar.gz;
  fi

chmod -R 777 *;;

######################################################################################  

c) 
clear; cd /home/`logname`/Vdrrepo; rm -rf *;

######################################################################################  
############################ Download libraries on local repo ####################################

			echo " Downloading libraries on local repo "

git clone https://github.com/intel/cmrt;
git clone https://github.com/intel/libva;
git clone https://github.com/01org/intel-hybrid-driver;
git clone https://github.com/intel/intel-vaapi-driver.git;
git clone https://github.com/intel/libva-utils;
wget https://www.nasm.us/pub/nasm/releasebuilds/2.15rc12/nasm-2.15rc12.tar.bz2;
git clone https://code.videolan.org/videolan/x264.git;
hg clone http://hg.videolan.org/x265;
git clone https://github.com/mstorsjo/fdk-aac.git;
git clone https://github.com/webmproject/libvpx;
wget https://ftp.osuosl.org/pub/xiph/releases/vorbis/libvorbis-1.3.7.tar.gz;
wget https://ffmpeg.org/releases/ffmpeg-4.3.1.tar.bz2;

############################ Download Vdr and Plugins on local repo ################################

			echo " Downloading Vdr and Plugins on local repo "

wget ftp://ftp.tvdr.de/vdr/vdr-2.4.6.tar.bz2;
wget https://www.dropbox.com/s/bblslie14bgd9ni/vdr-patches.2.4.6.tar.gz;
wget https://www.dropbox.com/s/qds2k91od7oboed/Make.config.tar.gz;
wget https://www.dropbox.com/s/bx97ikp7c1h2qj2/vdrsymbols.tar.gz;
git clone http://projects.vdr-developer.org/git/vdr-plugin-epgsearch.git;
wget https://www.dropbox.com/s/s9vggu8mil8ss7t/patch_epgsearch.tar.gz;
git clone git://github.com/manio/vdr-plugin-dvbapi.git;
wget https://www.dropbox.com/s/dv6okhltz3eu20i/vdr-plugin-radio-master.tar.gz;
git clone https://github.com/rofafor/vdr-plugin-iptv.git; 
wget https://www.dropbox.com/s/nof5ydmxrplw2b0/patch_iptv.tar.gz;
wget https://www.dropbox.com/s/vmhkf4rzhoh4wa5/iptv_conf.tar.gz;
git clone https://github.com/ua0lnj/vdr-plugin-mpv.git;
git clone git://projects.vdr-developer.org/vdr-plugin-weatherforecast.git;
wget https://www.dropbox.com/s/v0ipkt6x3bfbbs8/patch_weatherforecast.tar.gz;
wget https://www.uli-eckhardt.de/vdr/download/vdr-externalplayer-0.3.5.tgz;
wget https://www.dropbox.com/s/vhz1fz68159s0qg/externalplayer.conf.tar.gz;
git clone https://bitbucket.org/ua0lnj/channelscan.git;    
wget https://www.dropbox.com/s/400whbxq4tzsbtq/satellite_pack.tar.gz;
wget http://firefly.vdr-developer.org/systeminfo/vdr-systeminfo-0.1.5.tar.bz2;   

############################ Download skins ########################################

			echo " Downloading skins "

git clone https://gitlab.com/kamel5/skindesigner.git;
git clone https://gitlab.com/kamel5/SkinNopacity.git;
wget https://www.dropbox.com/s/806odyj5vyco3dg/lcars_pack.tar.gz;

############################ Download others #######################################

			echo " Downloading others "

wget https://www.dropbox.com/s/6hzpdx9yv5ypzxv/traduzioni.tar.gz;
wget https://www.dropbox.com/s/5uvx468b4b87auy/icone.tar.gz;
wget https://www.dropbox.com/s/56oomdr58os7msa/oscam.tar.gz;
wget https://www.dropbox.com/s/d3bn3ig8b3q2xp7/oscam64.tar.gz;
wget https://www.dropbox.com/s/hb2mv9ytz5q6yz7/picon.tar.gz; 
wget https://www.dropbox.com/s/6bdejeummyv0p3f/logos.tar.gz;

chmod -R 777 *;;

z) ;;
esac ;;

#############################################################################################################################  
#############################################################################################################################


2)                                        #######################################################
                                          #  Submenu - X264 - X265 - FDK-AAC - LIBVPX - FFMPEG  # libva-utils
                                          #######################################################

             
clear
apt-get -y install autoconf automake build-essential libass-dev libtool pkg-config texinfo zlib1g zlib1g-dev libva-dev cmake mercurial libdrm-dev libvorbis-dev libogg-dev git libx11-dev libperl-dev libpciaccess-dev libpciaccess0 xorg-dev;
cd /usr/local/src; mkdir -p ffmpeg_sources;
clear       
dialog --title "   ** Install Intel / Nvidia & Common Libraries **   " --infobox "
   --------------------------------------------------------------------------------------------------------------------
                                     Install or Remove Libraries
   --------------------------------------------------------------------------------------------------------------------
        
        *****  Install  *****  
        [a]    ONLY Intel Devices (Libva - Cmrt - Intel hybrid driver - Intel vaapi driver - Libva-utils)   
        [b]    Common Libs (Nasm - X264 - X265 - Fdk-Aac - Libvpx - Libvorbis -Ffmpeg)     
        
        *****  Remove  *****
                
                                *****     Remove Intel Libs      *****
        [a1]    Libva
        [b1]    Cmrt
        [c1]    Intel hybrid driver
        [d1]    Intel vaapi driver
        [e1]    Libva-utils
        
                                *****     Remove Common Libs      *****
        [f1]    Nasm
        [g1]    X264
        [h1]    X265 HG
        [i1]    FDK-AAC
        [l1]    Libvpx
        [m1]    Libvorbis                          
        [n1]    FFMPEG
        
        [z]     Skip

   -------------------------------------------------------------------------------------------------------------------- 
   -------------------------------------------------------------------------------------------------------------------- " 0 0
echo -n "        Enter your menu choice = Install [a-b] ~~ Remove [a1-n1] ~~ Exit [z]:      "
read yourch
case $yourch in
  
#############################################################################################################################
a)                                        ###################################################
                                          #                 Intel Libs                      #
                                          ###################################################
clear
echo "Installing Ubuntu-graphics-drivers"; sleep 3;
if [ -f /etc/apt/sources.list.d/oibaf-ubuntu-graphics-drivers-focal.list ];
  then  echo "Graphics-drivers already installed"
else
add-apt-repository ppa:oibaf/graphics-drivers; apt-get update; apt-get -y upgrade; apt-get -y dist-upgrade;
fi
echo "Installing Libva"; sleep 3;
apt-get -y install libdrm-dev;
if [ -d /usr/local/src/ffmpeg_sources/libva ];
then echo " Libva is already installed"; 
else
cd /usr/local/src/ffmpeg_sources; 
cp -rf /home/`logname`/Vdrrepo/libva /usr/local/src/ffmpeg_sources;
cd libva; ./autogen.sh; ./configure; make; make install; 
rm -rf /etc/ld.so.conf;
touch /etc/ld.so.conf;
    echo 'include /etc/ld.so.conf.d/*.conf
/usr/local/lib
/usr/local/lib/dri' >> /etc/ld.so.conf;
fi; 
sleep 2;
#
echo "Installing Cmrt"; sleep 3;
apt-get -y install libva-dev  #  controllare libva
apt-get -y install zlib1g-dev libass-dev libvorbis-dev libogg-dev 
apt-get -y install libx11-dev libperl-dev libpciaccess-dev libpciaccess0n libdrm-dev
if [ -d /usr/local/src/ffmpeg_sources/cmrt ];
then echo " Cmrt is already installed"; 
else
cd /usr/local/src/ffmpeg_sources; 
cp -rf /home/`logname`/Vdrrepo/cmrt /usr/local/src/ffmpeg_sources;
cd cmrt; ./autogen.sh; ./configure; time make -j4 VERBOSE=1; make -j4 install;
fi; 
sleep 2;
#
echo "Installing Intel-hybrid-driver"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/intel-hybrid-driver ];
then echo " Intel-hybrid-driver is already installed"; 
else
cd /usr/local/src/ffmpeg_sources; 
cp -rf /home/`logname`/Vdrrepo/intel-hybrid-driver /usr/local/src/ffmpeg_sources;
cd intel-hybrid-driver; ./autogen.sh; ./configure; make -j4 VERBOSE=1; make -j4 install;
fi; 
sleep 2;
#
echo "Installing Intel-Vaapi-driver"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/intel-vaapi-driver ];
then echo " Intel-Vaapi-driver is already installed"; 
else
cd /usr/local/src/ffmpeg_sources; 
cp -rf /home/`logname`/Vdrrepo/intel-vaapi-driver /usr/local/src/ffmpeg_sources;
cd intel-vaapi-driver; ./autogen.sh; ./configure; make -j4 VERBOSE=1; make -j4 install;
fi; 
sleep 2;
#
echo "Installing Libva-utils"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/libva-utils ];
then echo " Libva-utils is already installed"; 
else
cd /usr/local/src/ffmpeg_sources;
rm -rf libva-utils; cp -rf /home/`logname`/Vdrrepo/libva-utils /usr/local/src/ffmpeg_sources;
cd libva-utils; ./autogen.sh; ./configure; make -j4 VERBOSE=1; make -j4 install;
fi; 
sleep 2;;

#############################################################################################################################

b)                                        ###################################################
                                          #                 Common Libs                     #
                                          ###################################################

clear
echo "Installing Nasm"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/nasm ];
then echo " Nasm is already installed"; 
else
cd /usr/local/src/ffmpeg_sources
cp -rf /home/`logname`/Vdrrepo/nasm-2.15rc12.tar.bz2 /usr/local/src/ffmpeg_sources; tar xjvf nasm-2.15rc12.tar.bz2; rm -rf nasm-2.15rc12.tar.bz2; mv nasm-2.15rc12 nasm; cd nasm; ./autogen.sh; ./configure; make; checkinstall -D; mv -f nasm*.deb $PACKAGES
fi;
sleep 2;
#
echo "Installing X264"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/x264 ]; 
then echo " X264 is already installed"
else
cd /usr/local/src/ffmpeg_sources
rm -Rf $SRC/ffmpeg_sources/x264; cp -rf /home/`logname`/Vdrrepo/x264 /usr/local/src/ffmpeg_sources;
cd x264; git checkout stable;
./configure --enable-pic --enable-shared --extra-cflags="-mtune=native -march=native -mfpmath=sse -O4 -pipe"
make -j4; checkinstall --pkgname=x264 --pkgversion="2.4.6" --bk --default --deldoc=yes --pakdir=$PACKAGES
ldconfig -v; 
fi;
sleep 2;
#
echo "Installing X265"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/x265 ];
then echo " X265 is already installed"
else
cd /usr/local/src/ffmpeg_sources
cp -rf /home/`logname`/Vdrrepo/x265 /usr/local/src/ffmpeg_sources;
cd x265/build/linux;
./make-Makefiles.bash
make -j4; checkinstall --pkgname=x265 --pkgversion="2.4.6" --bk --default --deldoc=yes --pakdir=$PACKAGE
ldconfig -v;
fi;
sleep 2;
#
echo "Installing Fdk-aac"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/fdk-aac ];
then echo " Fdk-aac is already installed"
else
cd /usr/local/src/ffmpeg_sources
cp -Rf /home/`logname`/Vdrrepo/fdk-aac /usr/local/src/ffmpeg_sources; 
cd fdk-aac;  
./autogen.sh; ./configure --enable-shared --enable-static;
make -j4; checkinstall --pkgname=fdk-aac --pkgversion="2.4.6" --backup=no --deldoc=yes --fstrans=no --default --pakdir=$PACKAGES
fi;
sleep 2;
#
echo "Installing Libvpx"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/libvpx ];
then echo " Libvpx is already installed"
else
cd /usr/local/src/ffmpeg_sources;
cp -rf /home/`logname`/Vdrrepo/libvpx /usr/local/src/ffmpeg_sources;
cd libvpx; ./configure --prefix="$HOME/bin" --enable-runtime-cpu-detect --enable-vp9 --enable-vp8 --enable-postproc --enable-vp9-postproc --enable-multi-res-encoding --enable-webm-io --enable-vp9-highbitdepth --enable-onthefly-bitpacking --enable-realtime-only --cpu=native --as=yasm;
make -j4; checkinstall --pkgname=libvpx --pkgversion="2.4.6" --backup=no --deldoc=yes --fstrans=no --default --pakdir=$PACKAGES
fi;
sleep 2;
#
echo "Installing Libvorbis"; sleep 3;
if [ -d /usr/local/src/ffmpeg_sources/libvorbis ];
then echo " Libvorbis is already installed"
else
apt-get -y install libogg-dev
cd /usr/local/src/ffmpeg_sources; 
cp -rf /home/`logname`/Vdrrepo/libvorbis-1.3.7.tar.gz /usr/local/src/ffmpeg_sources; 
tar -zxvf libvorbis-1.3.7.tar.gz; mv -f libvorbis-1.3.7 libvorbis; rm -rf libvorbis-1.3.7.tar.gz;
cd libvorbis; ./configure --enable-static --prefix="$HOME/bin"; time make -j4; time make -j4 install
fi;
sleep 2;
#
	if [ -f /usr/local/src/ffmpeg_sources/nv-codec-headers/Makefile ];
  then  echo "nv-codec-headers are already installed"
else
    cd /usr/local/src/ffmpeg_sources; git clone https://git.videolan.org/git/ffmpeg/nv-codec-headers.git; cd nv-codec-headers; make; make install;
	fi;
#
echo "Installing Ffmpeg"; sleep 3;	
if [ -d /usr/local/src/ffmpeg_sources/ffmpeg ];
then echo " Ffmpeg is already installed"
else
apt-get -y install libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev libxcb-screensaver0-dev libvorbis-dev;
apt-get -y install libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev libxcb-icccm4-dev libxcb-keysyms1-dev;
apt-get -y install libtheora-dev libxvidcore-dev libvdpau-dev libmp3lame-dev libogg-dev libfreetype6-dev;
apt-get -y install freeglut3 freeglut3-dev libglew-dev libglm-dev mesa-common-dev libssl-dev

    echo "                    Wait for a few seconds ...";
cd /usr/local/src/ffmpeg_sources;
cp -rf /home/`logname`/Vdrrepo/ffmpeg-4.3.1.tar.bz2 /usr/local/src/ffmpeg_sources/; 
tar xjvf ffmpeg-4.3.1.tar.bz2; mv ffmpeg-4.3.1 ffmpeg; rm -rf ffmpeg-4.3.1.tar.bz2; cd ffmpeg; ./configure --extra-libs="-ldl" --enable-gpl --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-openssl --enable-libxcb --disable-libopus --enable-libtheora --enable-libvorbis --disable-libvpx --enable-libx264 --enable-libx265 --enable-cuvid --enable-nonfree --enable-libxvid --enable-opengl --enable-vdpau --enable-vaapi --enable-pic --enable-shared  --disable-doc --enable-swresample --disable-avresample --enable-nvenc --enable-cuda --disable-cuda-sdk 
    echo "                    Press Enter to continue ...               "; read enterKey;
make -j10; checkinstall --pkgname=ffmpeg --pkgversion="2.4.6" --backup=no --deldoc=yes --fstrans=no --default --pakdir=$PACKAGES
fi;
sleep 2;;
#############################################################################################################################  
#############################################################################################################################

a1)                                       #########################################
                                          #            Rimozione LIBVA            #
                                          #########################################


clear
    echo "                    Removing Libva "; sleep 2
cd $PACKAGES; dpkg -r libva.deb; rm -rf /usr/local/src/ffmpeg_sources/libva; rm -rf $PACKAGES/libva*;;

#############################################################################################################################

b1)                                       #########################################
                                          #            Rimozione Cmrt            #
                                          #########################################


clear
    echo "                    Removing Cmrt "; sleep 2
cd $PACKAGES; dpkg -r cmrt.deb; rm -rf /usr/local/src/ffmpeg_sources/cmrt; rm -rf $PACKAGES/Cmrt*;;

#############################################################################################################################

c1)                                       #########################################
                                          #    Rimozione Intel hybrid driver      #
                                          #########################################


clear
    echo "                    Removing Cmrt "; sleep 2
cd $PACKAGES; dpkg -r intel-hybrid.deb; rm -rf /usr/local/src/ffmpeg_sources/intel-hybrid-driver; rm -rf $PACKAGES/intel-hybrid*;;

#############################################################################################################################

d1)                                       #########################################
                                          #     Rimozione Intel Vaapi driver      #
                                          #########################################


clear
    echo "                    Removing Cmrt "; sleep 2
cd $PACKAGES; dpkg -r intel-vaapi.deb; rm -rf /usr/local/src/ffmpeg_sources/intel-vaapi-driver; rm -rf $PACKAGES/intel-vaapi*;;

#############################################################################################################################

e1)                                       #########################################
                                          #        Rimozione Libva-utils          #
                                          #########################################


clear
    echo "                    Removing Libva-utils "; sleep 2
cd $PACKAGES; dpkg -r libva-utils.deb; rm -rf /usr/local/src/ffmpeg_sources/libva-utils; rm -rf $PACKAGES/libva-utils*;;

#############################################################################################################################

f1)                                       #########################################
                                          #               Remove Nasm          #
                                          #########################################


clear
    echo "                    Removing Nasm"; sleep 4
cd $PACKAGES; dpkg -r nasm.deb; rm -rf /usr/local/src/ffmpeg_sources/nasm; rm -rf $PACKAGES/nasm*.deb;;
    
  
#############################################################################################################################

g1)                                       #########################################
                                          #               Remove X264             #
                                          #########################################


clear
    echo "                    Removing X264"; sleep 4
cd $PACKAGES; dpkg -r x264.deb; rm -rf /usr/local/src/ffmpeg_sources/x264; rm -rf $PACKAGES/x264*.deb;;
  
#############################################################################################################################

h1)                                       #########################################
                                          #               Remove X265             #
                                          #########################################


clear
    echo "                    Removing X265"; sleep 4
cd $PACKAGES; dpkg -r x265.deb; rm -rf /usr/local/src/ffmpeg_sources/x265;  rm -rf $PACKAGES/packages/x265*.deb;;

#############################################################################################################################

i1)                                       #########################################
                                          #               Remove FDK-AAC          #
                                          #########################################

clear
    echo "                    Removing Fdk-aac"; sleep 4
cd $PACKAGES; dpkg -r fdk-aac.deb; rm -rf /usr/local/src/ffmpeg_sources/fdk-aac; rm -rf $PACKAGES/fdk-aac*.deb;;

#############################################################################################################################

l1)                                       #########################################
                                          #            Remove LIBVPX              #
                                          #########################################

clear
    echo "                    Removing Libvpx "; sleep 4
cd $PACKAGES; dpkg -r libvpx.deb; rm -rf /usr/local/src/ffmpeg_sources/libvpx; rm -rf $PACKAGES/libvpx*.deb;;

#############################################################################################################################

m1)                                       #########################################
                                          #            Remove Libvorbis              #
                                          #########################################

clear
    echo "                    Removing Libvorbis "; sleep 4
apt-get -y purge libvorbis; rm -rf /usr/local/src/ffmpeg_sources/libvorbis;;

#############################################################################################################################

n1)                                       ####################################################
                                          #                Remove FFmpeg                     #
                                          ####################################################

clear
    echo "                    Removing FFmpeg "; sleep 4
cd $PACKAGES; dpkg -r ffmpeg.deb; rm -rf /usr/local/src/ffmpeg_sources/nv-codec-headers; rm -rf /usr/local/src/ffmpeg_sources/ffmpeg; rm -rf $PACKAGES/ffmpeg*.deb;; 

#############################################################################################################################

z) ;;
    esac;;
    
#############################################################################################################################  
#############################################################################################################################

3)                                        ##########################################################
                                          #        Submenu - VDR-2.4.x & Basic plugins             #
                                          ##########################################################
                  
    clear        
    dialog --title "   ** Install VDR-2.4.x & Basic plugins   **   " --infobox "
   ---------------------------------------------------------------------------------------------
        
        *****  Install  *****  .....................  *****  Remove  *****
   
        [a]    Install VDR-2.4.x & Basic plugins ........  [a1]    Remove VDR-2.4.x & Basic plugins
        [b]    First & Refresh VDR Setup ..........................
        
        [z]    Skip
   
   --------------------------------------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice = Install [a-b] ~~ Remove [a1] ~~ Exit [z]:      "
    read yourch
    case $yourch in

#############################################################################################################################  
#############################################################################################################################
                                                                                                                          
a)                                        ###############################################
                                          #        VDR & Basic plugins      #
                                          ###############################################


clear
    echo "vdr ALL=(ALL) ALL" >> /etc/sudoers; 
    echo "*** Install libraries ***"; sleep 4 
cd $SRC; 
apt-get -y install libfontconfig1-dev libfreetype6-dev libfribidi-dev gettext binutils ;
apt-get -y install libglibmm-2.4-dev libcap-dev libjpeg-dev libtinyxml-dev;
apt-get -y install libncurses5-dev libncursesw5-dev linux-libc-dev python3;
#
#
clear    
    echo "               Installing VDR      "; sleep 1

cp -rf /home/`logname`/Vdrrepo/$VDR.tar.bz2 $SRC/; tar xivf $VDR.tar.bz2; ln -s $VDR vdr; rm -rf $VDR.tar.bz2
#
cd vdr;
    echo "               Patching VDR      "; sleep 1
cp -rf /home/`logname`/Vdrrepo/vdr-patches.2.4.6.tar.gz $SRC/vdr/; tar -zxvf vdr-patches.2.4.6.tar.gz; rm -rf vdr-patches.2.4.6.tar.gz; sleep 1;
#
echo "                  *** zapcockpit ***"
    patch -p1 < vdr-2.4.0_zapcockpit.patch; sleep 1;
echo "                  *** editrecording ***"
    patch -p1 < 05_vdr_editrecording.patch; sleep 1;
echo "                  *** avcdescriptor ***"
    patch -p1 < 06_vdr_avcdescriptor.patch; sleep 1;
echo "                  *** epgsearch ***"
    patch -p1 < 10_vdr_epgsearch_exttimeredit_vdr-2.3.5.patch; sleep 1;
echo "                  *** pin ***"
    patch -p1 < 12_vdr_pin.patch; sleep 1; # ????
echo "                  *** mainmenuhooks ***"
    patch -p1 < 15_vdr_mainmenuhooks_vdr234.patch; sleep 1;
echo "                  *** wareagleicon ***"
    patch -p1 < 16_vdr_wareagleicon.patch; sleep 1;
echo "                  *** skinlcarsng ***"
    patch -p1 < 17_vdr_skinlcarsng_numrecordings.patch; sleep 1;    
echo "                  *** config ***"
    patch -p1 < 20_vdr_config.patch; sleep 1;
echo "                  *** svdrphosts ***"
    patch -p1 < 22_vdr_svdrphosts.patch; sleep 1;
echo "                  *** maxdevice ***"
    patch -p1 < 23_vdr_maxdevice.patch; sleep 1;
echo "                  *** dvb_power_saving ***"
    patch -p1 < 24_vdr_dvb_power_saving_feature.patch; sleep 1;# ????
echo "                  *** menuorg ***"
   patch -p1 < 26_vdr_menuorg.patch; sleep 1;
echo "                  *** hide_first_recording_level ***"
    patch -p1 < 28_vdr_hide_first_recording_level.patch; sleep 1;
echo "                  *** ttxtsub ***"
    patch -p1 < 29_vdr_ttxtsub.patch; sleep 1;
echo "                  *** rec-order ***"
    patch -p1 < 30_vdr_rec-order.patch; sleep 1;
echo "                  *** transponder_bind ***"
    patch -p1 < 99_vdr_epg_transponder_bind.patch; sleep 1;
#
cp -rf $VDRSRC/pictures/pic2mpg /usr/local/bin/;
#
make && make plugins
exit_status_check;
clear
    echo ""; echo "*** Final compilation ***"; echo ""
cd /usr/local/src/vdr;
checkinstall --fstrans=no --install=yes --pkgname=vdr --pkgversion "2.4.6" --pakdir=$PACKAGES --default
rm -rf /media/video; mkdir /media/video;
mkdir -p /etc/vdr/plugins; cp *.conf /etc/vdr; mkdir -p /usr/local/lib/vdr/plugins;

clear    
    echo "*** keymacros.conf setup ***";
rm -rf /etc/vdr/keymacros.conf; cd $SRCVDR; cp -rf vdr /usr/local/bin/; touch /etc/vdr/keymacros.conf
clear
    echo "# Remote control key macros for VDR
#
# Format:
#
# macrokey  key1 key2 key3...
# macrokey  @plugin key1 key2 key3...
#
# See man vdr(5)

Red       Recordings
Green     @channelscan
Yellow    Info
Blue      @tvguide
Ok        Channels" >> /etc/vdr/keymacros.conf
#
/usr/local/bin/vdr --help; exit_status_check
#
###########################################################
#        Italian translation for some plugins             #
###########################################################
cd $SRC; mkdir -p traduzioni; cd traduzioni;
cp /home/`logname`/Vdrrepo/traduzioni.tar.gz /$SRC/traduzioni/;
tar -zxvf traduzioni.tar.gz; rm -rf traduzioni.tar.gz;
###############################################################
# Install Basic plugins
clear
echo "                        "
echo "                        "
echo "                        "
echo "Install Basic plugins  ( Softhddevice / Softhdcuvid / Xineliboutput - Dvbapi - Epgsearch - SkinNopacity - Skindesigner - Wheatherforecast - Iptv - ExternalPlayer - Radio -Channelscan - System Info)"
echo "                 Press Enter to continue ...         "; read enterKey
cd $SRC;
mkdir -p /etc/vdr/plugins; mkdir -p /etc/vdr/themes; mkdir -p /$SHARE/skindesigner/scripts;
#
#
			   echo "               *** Setup Softhddevice / Softhdcuvid / Xineliboutput  ***"; sleep 1
#clear        
    				dialog --title "   ** Setup Softhddevice / Softhdcuvid / Xineliboutput **   " --infobox "
   				-------------------------------------------------------------------------
  				-------------------------------------------------------------------------

                                                       Nvidia Video Devices
			        [a]    Softhddevice (default)                 
			        [b]    Softhdcuvid                  
			        [c]    Xineliboutput 

                                                       Intel Video Devices
			        [d]    Softhddevice (default)                  
			        [e]    Softhdcuvid                  
			                
   				------------------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-e]:      "
    read yourch
    case $yourch in
#
a)  
clear
echo ""; echo "               *** Softhddevice**"; echo ""; sleep 3
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6 libxext-dev 
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
apt-get -y install libvdpau1 libvdpau-dev libavcodec-dev libavformat-dev libswresample-dev libswscale-dev
apt-get -y install libxcb-ewmh-dev libglu1-mesa-dev libgl1-mesa-dev
cd $VDRSRC;
git clone https://github.com/ua0lnj/vdr-plugin-softhddevice.git; cp -rf /$VDRSRC/vdr-plugin-softhddevice /home/`logname`/Vdrrepo/; mv vdr-plugin-softhddevice softhddevice; cd softhddevice; make ; make install;;
#
b) 
clear
echo ""; echo "               *** Softhdcuvid **"; echo ""; sleep 3
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6 libxext-dev 
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
apt-get -y install libvdpau1 libvdpau-dev libavcodec-dev libavformat-dev libswresample-dev libswscale-dev
apt-get -y install libxcb-ewmh-dev libglu1-mesa-dev libgl1-mesa-dev libplacebo-dev libavfilter-dev
cd $VDRSRC;
cd $VDRSRC; wget https://github.com/jojo61/vdr-plugin-softhdcuvid/archive/master.tar.gz; cp -rf /$VDRSRC/master.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf master.tar.gz; mv vdr-plugin-softhdcuvid-master softhdcuvid; rm -rf master.tar.gz; cd softhdcuvid; rm -rf Makefile; wget https://www.dropbox.com/s/50olrxtjn8pcon1/patch_softhdcuvid.tar.gz; cp -rf /$VDRSRC/softhdcuvid/patch_softhdcuvid.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf patch_softhdcuvid.tar.gz; rm -rf patch_softhdcuvid.tar.gz; patch -p1 < 03_LanguageIT.patch; make; make install;;
#
c) 
clear
echo ""; echo "               *** Xineliboutput***"; echo ""; sleep 3
echo "                    Installing Xine-lib"; sleep 4      
cd $SRC; apt-get -y install autopoint libxine2-dev libxrender-dev libextractor-dev libxrandr-dev libxine2-ffmpeg mjpegtools libtool;
if [ -f /usr/local/lib/win32/cook.so ]; then
    echo "Codecs $Remind3"; 
    	else 
	    wget http://www.mplayerhq.hu/MPlayer/releases/codecs/all-20110131.tar.bz2; cp -rf /$VDRSRC/all-20110131.tar.bz2 /home/`logname`/Vdrrepo/; tar xivf all-20110131.tar.bz2; rm -rf all-20110131.tar.bz2; mv all-20110131 /usr/local/lib/win32; ln -s /usr/local/lib/win32 /usr/local/lib/codecs; 
     fi
#
if [ -f $PACKAGES/libxine2*.deb ]; then
    echo "Xine-lib $Remind3"; 
    	else cd $SRC; wget https://sourceforge.net/projects/xine/files/xine-lib/1.2.11/xine-lib-1.2.11.tar.xz; tar -xJf xine-lib-1.2.11.tar.xz; mv xine-lib-1.2.11 xine-lib; rm -rf xine-lib-1.2.11.tar.xz; cd xine-lib; export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH; ./configure --disable-dxr3 --enable-w32dll --with-pic --with-w32-path=/usr/local/lib/win32; make -j4; checkinstall --fstrans=no --install=yes --pkgname=libxine2 --pkgversion "1.2.11-git" --pakdir=$PACKAGES --default
	fi
# wget https://downloads.sourceforge.net/xine/xine-lib-1.2.10.tar.xz; 
echo "                    Installing Xineliboutput"; sleep 4 
cd $VDRSRC; 
wget https://sourceforge.net/projects/xineliboutput/files/xineliboutput/vdr-xineliboutput-2.2.0/vdr-xineliboutput-2.2.0.tgz; tar zxvf vdr-xineliboutput-2.2.0.tgz; rm -rf vdr-xineliboutput-2.2.0.tgz; cp -rf /$VDRSRC/xineliboutput-2.2.0 /home/`logname`/Vdrrepo/; mv -f xineliboutput-2.2.0 xineliboutput; cd xineliboutput; wget https://www.dropbox.com/s/11clb1n2b6itave/patch_xineliboutput.tar.gz; tar -zxvf patch_xineliboutput.tar.gz; rm -rf patch_xineliboutput.tar.gz;  patch -p1 < configure.patch;  sleep 1; patch -p1 < 12_xineliboutput_dfatmo-switch.patch; sleep 1; patch -p1 < 13_xineliboutput_null.patch; sleep 1; ./configure --enable-vdr --disable-opengl --enable-libxine --disable-libcec; make; sleep 1; make install; cd ../../..; make plugins; mkdir -p /etc/vdr/plugins/xineliboutput; cp -rf /usr/local/src/vdr/PLUGINS/src/xineliboutput/*.mpg /etc/vdr/plugins/xineliboutput; cp -rf /usr/local/src/vdr/PLUGINS/src/xineliboutput/examples/remote.conf.example /etc/vdr/plugins/xineliboutput/remote.conf; echo "*** allowed_hosts.conf setup ***"; touch /etc/vdr/plugins/xineliboutput/allowed_hosts.conf; echo "$ALLOWED" >> /etc/vdr/plugins/xineliboutput/allowed_hosts.conf;;
# patch -p1 < 10_xineliboutput_mld.patch;wget https://www.dropbox.com/s/11clb1n2b6itave/patch_xineliboutput.tar.gz; tar -zxvf patch_xineliboutput.tar.gz; rm -rf patch_xineliboutput.tar.gz;  patch -p1 < configure.patch;  sleep 1; patch -p1 < 12_xineliboutput_dfatmo-switch.patch; sleep 1; patch -p1 < 13_xineliboutput_null.patch; 
d)
clear
echo ""; echo "               *** Softhddevice (default)**"; echo ""; sleep 3
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6 libxext-dev 
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
apt-get -y install libvdpau1 libvdpau-dev libavcodec-dev libavformat-dev libswresample-dev libswscale-dev
apt-get -y install libxcb-ewmh-dev libglu1-mesa-dev libgl1-mesa-dev
cd $VDRSRC;
git clone https://github.com/ua0lnj/vdr-plugin-softhddevice.git; cp -rf /$VDRSRC/vdr-plugin-softhddevice /home/`logname`/Vdrrepo/; mv vdr-plugin-softhddevice softhddevice; cd softhddevice;  make; make install;;
#
e)
clear
echo ""; echo "               *** Softhdcuvid **"; echo ""; sleep 3
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6 libxext-dev 
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
apt-get -y install libvdpau1 libvdpau-dev libavcodec-dev libavformat-dev libswresample-dev libswscale-dev
apt-get -y install libxcb-ewmh-dev libglu1-mesa-dev libgl1-mesa-dev libplacebo-dev libavfilter-dev
cd $VDRSRC; 
wget https://github.com/jojo61/vdr-plugin-softhdcuvid/archive/master.tar.gz; cp -rf /$VDRSRC/master.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf master.tar.gz; mv vdr-plugin-softhdcuvid-master softhdcuvid; cd softhdcuvid; wget https://www.dropbox.com/s/h6w4axdur1jn6qx/patch_softhddevice_ua0lnj.tar.gz; cp -rf /$VDRSRC/softhddevice/patch_softhddevice_ua0lnj.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf patch_softhddevice_ua0lnj.tar.gz; rm -rf patch_softhddevice_ua0lnj.tar.gz; patch -p1 < 03_LanguageIT.patch; make; make install;;
esac
#
#
echo ""; echo "               *** Dvbapi ***"; echo ""; sleep 3
cd $VDRSRC; 
cp -rf /home/`logname`/Vdrrepo/vdr-plugin-dvbapi /$VDRSRC/; mv vdr-plugin-dvbapi dvbapi; cd ../..; make plugins
#
#
echo ""; echo "               *** Epgsearch ***"; echo ""; sleep 3
cd $VDRSRC;
apt-get -y install libc6 libgcc1 libstdc++6
cp -rf /home/`logname`/Vdrrepo/vdr-plugin-epgsearch /$VDRSRC/; mv vdr-plugin-epgsearch epgsearch; cd epgsearch; cp -rf /home/`logname`/Vdrrepo/patch_epgsearch.tar.gz /$VDRSRC/epgsearch/; tar -zxvf patch_epgsearch.tar.gz; rm -rf patch_epgsearch.tar.gz; patch -p1 < 10_langinfo-include.diff; patch -p1 < 11_epgsearch_menue.patch; patch -p1 < 12_epgsearch_README.patch; cd ../../..; make plugins; 
# 
#
echo ""; echo "               *** SkinNopacity ***";  sleep 3
apt-get -y install graphicsmagick-libmagick-dev-compat 
apt-get -y install libc6-dev libfontconfig1-dev  
apt-get -y install zlib1g zlib1g-dev lm-sensors
apt-get -y install libglib2.0-0 libpcre3 libpcre3-dev
apt-get -y install libexpat1 libexpat1-dev libpcre3 libpcre3-dev
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/SkinNopacity /$VDRSRC; cd SkinNopacity; make install; 
#  
#
echo ""; echo "               *** Skindesigner ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install libcurl4 librsvg2-dev libxml2-dev libcairo2-dev; cp -rf /home/`logname`/Vdrrepo/skindesigner /$VDRSRC/; cd skindesigner; make; make install; 
#
#
echo ""; echo "               *** Iptv ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install libcurl4 libcurl4-gnutls-dev vlc mplayer; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-iptv /$VDRSRC; mv vdr-plugin-iptv iptv; cd iptv; cp -rf /home/`logname`/Vdrrepo/patch_iptv.tar.gz /$VDRSRC/iptv; tar -zxvf patch_iptv.tar.gz; rm -rf patch_iptv.tar.gz; patch -p1 < 10_iptv_protocolext.patch; make; cd ../../..; make plugins; 
#
echo ""; echo "               *** Weatherforecast ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install libcurl4-openssl-dev libjansson-dev librsvg2-dev;
cp -rf /home/`logname`/Vdrrepo/vdr-plugin-weatherforecast /$VDRSRC; mv vdr-plugin-weatherforecast weatherforecast; cd weatherforecast; cp -rf /home/`logname`/Vdrrepo/patch_weatherforecast.tar.gz /$VDRSRC/weatherforecast/; tar -zxvf patch_weatherforecast.tar.gz; rm -rf patch_weatherforecast.tar.gz; patch -p1 < 10_weatherforecast_debug.patch; sleep 1; patch -p1 < 11_weatherforecast_i18n-it.patch; cd ../../..; make plugins
#
echo ""; echo "               *** Externalplayer ***";  sleep 3
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/vdr-externalplayer-0.3.5.tgz /$VDRSRC; tar zxvf vdr-externalplayer-0.3.5.tgz; rm -rf vdr-externalplayer-0.3.5.tgz; mv externalplayer-0.3.5 externalplayer; cp -rf /$SRC/traduzioni/external_it_IT.po /$VDRSRC/externalplayer/po/; cd externalplayer/po/; mv external_it_IT.po it_IT.po; cd ../../../..; make plugins; 
#
#
echo ""; echo "               *** Radio ***";  sleep 3
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-radio-master.tar.gz /$VDRSRC; tar -zxvf vdr-plugin-radio-master.tar.gz; mv vdr-plugin-radio-master radio; rm -rf vdr-plugin-radio-master.tar.gz; cd radio; make; cd ../../..; make plugins; cd $PLUGINS; mkdir -p radio; cp -rf $VDRSRC/radio/config/mpegstill/* $PLUGINS/radio/; cp -rf $VDRSRC/radio/config/scripts/* $PLUGINS/radio/;
#
#
echo ""; echo "               *** Channelscan ***";  sleep 3
cd $VDRSRC; apt-get -y install libboost-iostreams-dev; cp -rf /home/`logname`/Vdrrepo/channelscan /$VDRSRC; cp -rf $VDRSRC/channelscan/script/* /usr/local/bin; cd ../..; make plugins; cd $PLUGINS; mkdir -p transponders; cp -rf /home/`logname`/Vdrrepo/satellite_pack.tar.gz  $PLUGINS/transponders; cd transponders; tar -zxvf satellite_pack.tar.gz; rm -rf satellite_pack.tar.gz;
#
#
echo ""; echo "              *** Mpv ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install mpv libmpv-dev libmpv1 libxrandr-dev; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-mpv /$VDRSRC; mv vdr-plugin-mpv mpv; cd mpv; make; make install;
#
#
echo ""; echo "               *** System Info ***";  sleep 3
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/vdr-systeminfo-0.1.5.tar.bz2 /$VDRSRC; tar xivf vdr-systeminfo-0.1.5.tar.bz2; mv systeminfo-0.1.5 systeminfo; rm -rf vdr-systeminfo-0.1.5.tar.bz2; mv -f $VDRSRC/systeminfo/scripts/systeminfo.sh /usr/local/bin/; cd ../..; make plugins; 
#
#
cd $SRC/vdr; make plugins install;

    echo "                    Press Enter to continue ...               "; read enterKey;;

#############################################################################################################################  
#############################################################################################################################

a1)                                       #########################################
                                          #              Remove VDR-2.4.x         #
                                          #########################################


clear
    echo "                    Removing VDR 2.4.x"; sleep 4
dpkg -r vdr; dpkg --purge vdr; rm -rf /etc/vdr; rm -rf /usr/share/vdr; rm -rf /usr/lib/vdr; rm -rf /var/cache/vdr; cd $SRC; rm -rf vdr vdr-*; cd packages; rm -rf vdr*.deb; rm -rf /usr/local/bin/vdrpoweroff; rm -rf /usr/local/bin/vdrrun;  rm -rf /usr/local/lib/vdr; rm -rf /usr/local/bin/vdr-*; rm -rf /usr/local/bin/vdr; rm -rf /usr/local/bin/start-vdr-xine.sh; rm -rf /usr/local/bin/start-xinelib-vdr.sh; rm -rf /usr/local/share/vdr; rm -rf /usr/local/bin/start-vdr.sh; rm -rf /usr/local/bin/KillVdr.sh; rm -rf /home/`logname`/Scrivania/Xinelib.desktop; rm -rf /home/`logname`/Scrivania/Vdr-Xine.desktop; rm -rf /home/`logname`/Scrivania/Vdr.desktop; rm -rf /home/`logname`/Scrivania/KillVdr.desktop; cd $PACKAGES; rm -rf vdr*.deb; rm -rf /usr/share/applications/Xinelib.desktop; rm -rf /usr/share/applications/Vdr-Xine.desktop; rm -rf /usr/share/applications/Vdr.desktop; rm -rf /usr/share/applications/KillVdr.desktop;
    echo "                    Press Enter to continue ...               "; read enterKey;;

#############################################################################################################################  
#############################################################################################################################

b)                                        ###############################################
                                          #               Configuring VDR               #
                                          ###############################################


clear
					echo "    Configuring VDR"; sleep 3
clear
cd /usr/lib/vdr/skindesigner/scripts/; ln -s temperatures.default temperatures; ln -s vdrstats.default vdrstats;
cd /home/`logname`/Vdrrepo/; chmod -R 777 *;
#
cp -rf /home/`logname`/Vdrrepo/externalplayer.conf.tar.gz /etc/vdr/plugins/externalplayer; cd /etc/vdr/plugins/externalplayer; rm -rf externalplayer.conf; tar -zxvf externalplayer.conf.tar.gz; rm -rf externalplayer.conf.tar.gz;
#
cp -rf /home/`logname`/Vdrrepo/iptv_conf.tar.gz /$PLUGINS/iptv/; cd /$PLUGINS/iptv/; rm -rf vlc2iptv; tar -zxvf iptv_conf.tar.gz; rm -rf iptv_conf.tar.gz; 
#  
					echo "    Installing true type"; sleep 1

if [ -d /usr/share/fonts/truetype/vdrsymbols ];
then echo " Fonts $Remind4"; sleep 3;
else cp -rf /home/`logname`/Vdrrepo/vdrsymbols.tar.gz /usr/share/fonts/truetype/; cd /usr/share/fonts/truetype/; tar -zxvf vdrsymbols.tar.gz;
fc-cache -fv
fi;

##########################################################################################################################

					  #########################################	
					  #         Installing Vdr Icons          #
                                          #########################################

					echo "                    Installing Vdr Icons"; sleep 1
if [ -f $SRC/icone/vdr.jpg ];
then echo " Icons $Remind4"; sleep 3;
else cd $SRC; cp -rf /home/`logname`/Vdrrepo/icone.tar.gz /usr/local/src/; tar -zxvf icone.tar.gz; rm -rf icone.tar.gz;
fi;

#############################################################################################################################

					  #########################################	
					  #     Create start Vdr command line     #
					  #########################################
							

echo "                    Create start Vdr command line"; sleep 1
rm -rf /usr/local/bin/vdrrun; touch /usr/local/bin/vdrrun;
echo '#!/bin/bash

/usr/local/bin/vdr -c /etc/vdr -E /var/vdr -l 3 -u root '$PLUGIN' -s /usr/local/bin/vdrpoweroff ' >> /usr/local/bin/vdrrun && chmod a+x /usr/local/bin/vdrrun
#
					echo "   *** Create start Vdr command line  ***"; sleep 1
#clear        
    dialog --title "   ** Create start Vdr command line **   " --infobox "
   ----------------------------------------------
          Create start Vdr command line             
   ----------------------------------------------

	NVIDIA VIDEO DEVICES
        [a]    Softhddevice (default) & Mpv
        [b]    Softhdcuvid  & Mpv
        [c]    Xineliboutput  & Mpv
        
	INTEL VIDEO DEVICES
        [d]    Softhddevice (default)  & Mpv
        [e]    Softhdvaapi & Mpv

   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-e]:      "
    read yourch
    case $yourch in                  

a) clear; sed -i "s|-P'dvbapi'|& -P'softhddevice -f -w disable-ogl-osd' -P'mpv -a alsa -b /home/`logname`'|" /usr/local/bin/vdrrun && cd /etc/vdr/ && wget https://www.dropbox.com/s/873qnh3yxmnzo0o/setup16_softhddevice.tar.gz && cp -rf /etc/vdr/setup16_softhddevice.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf setup16_softhddevice.tar.gz && rm -rf setup16_softhddevice.tar.gz;;
b) clear; sed -i "s|-P'dvbapi'|& -P'softhdcuvid -f' -P'mpv -a alsa -b /home/`logname`'|" /usr/local/bin/vdrrun && cd /etc/vdr/ && wget https://www.dropbox.com/s/873qnh3yxmnzo0o/setup16_softhddevice.tar.gz && cp -rf /etc/vdr/setup16_softhddevice.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf setup16_softhddevice.tar.gz && rm -rf setup16_softhddevice.tar.gz;;
c) clear; sed -i "s|-P'dvbapi'|& -P'xineliboutput --local=sxfe --fullscreen --video=vdpau --hud --audio=alsa --remote=none --post=tvtime:method=Linear,cheap_mode=1,pulldown=0,use_progressive_frame_flag=1,chroma_filter=0,enabled=1'|" /usr/local/bin/vdrrun && sed -i "s|-P'iptv'|& -P'mpv -a alsa -b /home/`logname`'|" /usr/local/bin/vdrrun && cd /etc/vdr/ && wget https://www.dropbox.com/s/kalujk6k7oksr6l/setup16_xineliboutput_nvidia.tar.gz && cp -rf /etc/vdr/setup16_xineliboutput_nvidia.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf setup16_xineliboutput_nvidia.tar.gz && rm -rf setup16_xineliboutput_nvidia.tar.gz;;    
d) clear; sed -i "s|-P'dvbapi'|& -P'softhddevice -f -v va-api' -P'mpv -a alsa -v vaapi -b /home/'|" /usr/local/bin/vdrrun && cd /etc/vdr/ && wget https://www.dropbox.com/s/873qnh3yxmnzo0o/setup16_softhddevice.tar.gz && cp -rf /etc/vdr/setup16_softhddevice.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf setup16_softhddevice.tar.gz && rm -rf setup16_softhddevice.tar.gz;; 
e) clear; sed -i "s|-P'dvbapi'|& -P'softhdvaapi -d :0.0 -f' -P'mpv -a alsa -v vaapi -b /home/`logname`'|" /usr/local/bin/vdrrun && cd /etc/vdr/ && wget https://www.dropbox.com/s/873qnh3yxmnzo0o/setup16_softhddevice.tar.gz && cp -rf /etc/vdr/setup16_softhddevice.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf setup16_softhddevice.tar.gz && rm -rf setup16_softhddevice.tar.gz;;
esac
#   Permission to execute Vdr       
echo "%`logname` ALL=NOPASSWD: /etc/init.d/vdr" >> /etc/sudoers
#    Creazione /usr/local/bin/vdrpoweroff    
rm -rf /usr/local/bin/vdrpoweroff; touch /usr/local/bin/vdrpoweroff
echo '#!/bin/sh
#file name: Kill Vdr "vdrpoweroff"
killall -9 mpv & killall -9 vdr & killall -9 vlc & killall -9 vdr-sxfe & killall -9 vdrrun 
# & killall -9 oscam & shutdown -h now '  >> /usr/local/bin/vdrpoweroff
# 
#
chmod 755 /usr/local/bin/vdrpoweroff
#
#  Create /etc/init.d/vdr           
rm -rf /etc/init.d/vdr; touch /etc/init.d/vdr 
echo '
#!/bin/sh
#
# To be copied to: /etc/init.d
# And type:
### BEGIN INIT INFO
# Provides:          VDR
# Required-Start:   
# Required-Stop:     
# Default-Start:     0 1 2 3 4 5 6
# Default-Stop:     
# Description:       Start, Stop or Restart VDR
### END INIT INFO

# Shell functions sourced from /etc/rc.status:
set -e

# Reset status of this service
# rc_reset
#
echo "Vdr init.d script using: $1" >> /var/log/vdr.log &
case "$1" in
    start)
        echo -n "Start VDR "
       /usr/local/bin/vdrrun >> /var/log/vdr.log &
        # Remember status and be verbose
        ;;
    stop)
        echo -n "Stop VDR "

       killall -9 vdr
       killall -9 mpv       
       killall -9 vlc
       killall -9 vdr-sxfe
       killall -9 vdrrun
        # Remember status and be verbose
        ;;
    restart)
        echo -n "Restart VDR "
        $0 stop
        $0 start

        # Remember status and be quiet
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;
esac
exit 0
' >> /etc/init.d/vdr
chmod 755 /etc/init.d/vdr

#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #                  Oscam Setup                   #
                                          ##################################################
                                          
cd /usr/local; mkdir -p etc;                                          
if [ -f /usr/local/etc/oscam.check ];
  then  echo "Oscam is already installed"
else
echo "oscam ALL=(ALL) ALL" >> /etc/sudoers; 
apt-get install libssl.dev libcrypto++-.dev; rm -rf /etc/init.d/oscam; touch /etc/init.d/oscam; 

echo '
#!/bin/sh
#
# To be copied to: /etc/init.d
# And type:
### BEGIN INIT INFO
# Provides:          Oscam
# Required-Start:   
# Required-Stop:     
# Default-Start:     0 1 2 3 4 5 6
# Default-Stop:     
# Description:       Start, Stop or Restart Oscam
### END INIT INFO

# Shell functions sourced from /etc/rc.status:
set -e

# Reset status of this service
# rc_reset
#
echo "Vdr init.d script using: $1" >> /var/log/oscam.log &
case "$1" in
    start)
        echo -n "Start Oscam "
       /usr/local/bin/oscam >> /var/log/oscam.log &
        # Remember status and be verbose
        ;;
    stop)
        echo -n "Kill Oscam "
       killall -9 oscam
        # Remember status and be verbose
        ;;
    restart)
        echo -n "Restart Oscam "
        $0 stop
        $0 start

        # Remember status and be quiet
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;
esac
exit 0
' >> /etc/init.d/oscam; chmod 755 /etc/init.d/oscam; echo "%`logname` ALL=NOPASSWD: /etc/init.d/oscam" >> /etc/sudoers; 
cd $ETC; cp -rf /home/`logname`/Vdrrepo/oscam.tar.gz /$ETC/; tar -zxvf oscam.tar.gz; rm -rf oscam.tar.gz;
fi;
if [ -f /usr/local/etc/oscam.check ];
  then  echo "Oscam is already configurated"
else
cp -rf /home/`logname`/Vdrrepo/oscam64.tar.gz /usr/local/bin/; cd /usr/local/bin; tar -zxvf oscam64.tar.gz; rm -rf oscam64.tar.gz;
chmod 777 oscam;
fi;

#############################################################################################################################

                                          ##################################################
                                          #           Setup Vdr & Oscam icons              #
                                          ##################################################


				echo "               *** Setup Vdr icons  ***"; sleep 3

rm -rf /home/`logname`/Scrivania/Vdr.desktop; rm -rf /usr/share/applications/Vdr.desktop;
if [ -d $SRC/vdr ];
   then
touch /usr/share/applications/Vdr.desktop;  
chmod 777 /usr/share/applications/Vdr.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=Vdr
Description=Start of Vdr
Icon=/usr/local/src/icone/vdr.png
Exec=/usr/local/bin/start-vdr.sh
">> /usr/share/applications/Vdr.desktop;
chmod 777 /usr/share/applications/Vdr.desktop; 

rm -rf /usr/local/bin/start-vdr.sh;
touch /usr/local/bin/start-vdr.sh;
echo "#!/bin/sh

sudo /etc/init.d/vdr start > /dev/null 2>&1" >> /usr/local/bin/start-vdr.sh;
chmod 777 /usr/local/bin/start-vdr.sh;

else echo " Vdr $Remind5"
fi

#############################################################################################################################  

		echo "               *** Setup Kill Vdr icon  ***"; sleep 1
                                          
rm -rf /home/`logname`/Scrivania/KillVdr.desktop; rm -rf /usr/share/applications/KillVdr.desktop;
touch /usr/share/applications/KillVdr.desktop; 
chmod 777 /usr/share/applications/KillVdr.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=KillVdr
Description=Kill Vdr
Icon=/usr/local/src/icone/killvdr.png
Exec=/usr/local/bin/KillVdr.sh
" >> /usr/share/applications/KillVdr.desktop; 
chmod 777 /usr/share/applications/KillVdr.desktop; 

rm -rf /usr/local/bin/KillVdr.sh;
touch /usr/local/bin/KillVdr.sh;
echo '#!/bin/sh

sudo /etc/init.d/vdr stop > /dev/null 2>&1
' >> /usr/local/bin/KillVdr.sh;
chmod 777 /usr/local/bin/KillVdr.sh;

#############################################################################################################################  
                                          
				echo "               *** Setup Oscam icon  ***"; sleep 1

rm -rf /home/`logname`/Scrivania/Oscam.desktop; rm -rf /usr/share/applications/Oscam.desktop;
touch /usr/share/applications/Oscam.desktop;
chmod 777 /usr/share/applications/Oscam.desktop; 
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=Oscam
Description=Oscam Start 
Icon=/usr/local/src/icone/Oscam.png
Exec=/usr/local/bin/start-oscam.sh
" >> /usr/share/applications/Oscam.desktop; 
chmod 777 /usr/share/applications/Oscam.desktop; 

rm -rf /usr/local/bin/start-oscam.sh; 
touch /usr/local/bin/start-oscam.sh; 
echo '#!/bin/sh 
sleep 10
sudo /etc/init.d/oscam start > /dev/null 2>&1
' >> /usr/local/bin/start-oscam.sh; 
chmod 777 /usr/local/bin/start-oscam.sh;
    echo "kodi ALL=(ALL) ALL" >> /etc/sudoers; 

#############################################################################################################################  
                                         
				echo "               *** Setup Kill Oscam icon  ***"; sleep 1

rm -rf /home/`logname`/Scrivania/KillOscam.desktop; rm -rf /usr/share/applications/KillOscam.desktop;
touch /usr/share/applications/KillOscam.desktop; 
chmod 777 /usr/share/applications/KillOscam.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=KillOscam
Description=Kill Oscam
Icon=/usr/local/src/icone/killoscam.png
Exec=/usr/local/bin/KillOscam.sh
" >> /usr/share/applications/KillOscam.desktop; 
chmod 777 /usr/share/applications/KillOscam.desktop; 

rm -rf /usr/local/bin/KillOscam.sh;
touch /usr/local/bin/KillOscam.sh
echo '#!/bin/sh

sudo /etc/init.d/oscam stop > /dev/null 2>&1
' >> /usr/local/bin/KillOscam.sh;
chmod 777 /usr/local/bin/KillOscam.sh;

#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #          Install default Skin for Vdr          #
                                          ##################################################
                                          
                                          
					echo "               *** Install default Skin for Vdr  ***"; sleep 1
if [ -f /etc/vdr/themes/checklcars ];
then echo " Default Skin is already installed"
else cp -rf /home/`logname`/Vdrrepo/lcars_pack.tar.gz /etc/vdr/themes; cd /etc/vdr/themes; tar -zxvf lcars_pack.tar.gz; cd /etc/vdr/themes; rm -rf lcars_pack.tar.gz;
fi
#
#


#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #               Install Channels logos           #
                                          ##################################################

                            
cd /etc/vdr/plugins/; mkdir -p picon;
#
if [ -f /etc/vdr/logos/2be.png ];
then echo " Logos are already installed"
else
cp -rf /home/`logname`/Vdrrepo/logos.tar.gz /etc/vdr/; cd /etc/vdr/; tar -zxvf logos.tar.gz; rm -rf logos.tar.gz;
fi
sleep 1
ln -s /etc/vdr/plugins/picon liquid-logos4anthra_HD;

#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #                  Diseqc setup                  #
                                          ##################################################
                                          
                                          
rm -rf /etc/vdr/diseqc.conf;
rm -rf /etc/vdr/channels.conf;
					echo "               *** Diseqc setup  ***"; sleep 1
#echo "*** diseqc.conf setup ***"; sleep 3

clear        
    dialog --title "   ** diseqc.conf setup **   " --infobox "
   ----------------------------------------------
                Diseqc setup             
   ----------------------------------------------
        [a]    Eutelsat 9°E
        [b]    Hot Bird 13°E
        [c]    Astra 19.2°E
        [d]    Astra 23°E
        [e]    Astra 28.2°E
        [f]    Thor 0.8°W
        [g]    Eutelsat 5°W                   
        [h]    Dual 13, 19.2°E
        [i]    Trial 9, 13, 19.2°E

        [z]    Skip
        
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-z]:      "
    
    read yourch
    case $yourch in
a) echo "$MONO9" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/xfvwaoesgbtfecr/channels.Eutelsat9.conf.tar.gz && cp -rf /etc/vdr/channels.Eutelsat9.conf.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.Eutelsat9.conf.tar.gz && rm -rf channels.Eutelsat9.conf.tar.gz;;
b) clear; echo "$MONO13" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/lrsntp500jmwfp7/channels.conf.hotbird.tar.gz && cp -rf /etc/vdr/channels.conf.hotbird.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.hotbird.tar.gz && rm -rf channels.conf.hotbird.tar.gz;;
c) clear; echo "$MONO19" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.astra.tar.gz && cp -rf /etc/vdr/channels.conf.astra.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.astra.tar.gz && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && rm -rf channels.conf.astra.tar.gz;;
d) echo "$MONO23" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.Astra23.tar.gz && cp -rf /etc/vdr/channels.conf.Astra23.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.Astra23.tar.gz && rm -rf channels.conf.Astra23.tar.gz;;
e) echo "$MONO28" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.Astra28.tar.gz && cp -rf /etc/vdr/channels.conf.Astra28.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.Astra28.tar.gz && rm -rf channels.conf.Astra28.tar.gz;;
f) echo "$MONO08W" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.Thor.tar.gz && cp -rf /etc/vdr/channels.conf.Thor.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.Thor.tar.gz && rm -rf channels.conf.Thor.tar.gz;;
g) echo "$MONO5W" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 1/DiSEqC = 0/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.Eutelsat5.tar.gz && cp -rf /etc/vdr/channels.conf.Eutelsat5.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.Eutelsat5.tar.gz && rm -rf channels.conf.Eutelsat5.tar.gz;;
h) clear; echo "$DUAL" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/z3czcyw5za82utc/channels.conf.dual.tar.gz && cp -rf /etc/vdr/channels.conf.dual.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.dual.tar.gz && rm -rf channels.conf.dual.tar.gz;;
i) clear; echo "$TRIAL" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf && cd /etc/vdr/ && wget https://www.dropbox.com/s/oebo5gddykvxng4/channels.conf.trial.tar.gz && cp -rf /etc/vdr/channels.conf.trial.tar.gz /home/`logname`/Vdrrepo/ && tar -zxvf channels.conf.trial.tar.gz && rm -rf channels.conf.trial.tar.gz;;
z);;
esac

#############################################################################################################################
#############################################################################################################################

                                          ##################################################
                                          #                   Vlc as root                 # 
                                          ##################################################


sed -i 's/geteuid/getppid/' /usr/bin/vlc

#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #                   Setup remote                 # 
                                          ##################################################
                                          
					echo "               *** Setup remote  ***"; sleep 1
#apt-get -y install lirc lirc-x liblircclient-dev;
clear        
    dialog --title "   ** Setup remote **   " --infobox "
   ----------------------------------------------
                Setup remote             
   ----------------------------------------------
        [a]    Mce
        [b]    Hama-Mce
        [c]    Hauppauge
        [d]    Mce-Spinel remote
        [e]    Vdr Manual
        
        [z]    Skip
 
    ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-z]:      "
    read yourch
    case $yourch in

a) clear; cd /etc/vdr; wget https://www.dropbox.com/s/hsp66258srhwa1d/mce-remote.conf.tar.gz; cp -rf /etc/vdr/mce-remote.conf.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf mce-remote.conf.tar.gz; rm -rf mce-remote.conf.tar.gz;;
b) clear; cd /etc/vdr; wget https://www.dropbox.com/s/gjjsn2h32mlqm4i/New-hama-mce-remote.conf.tar.gz; cp -rf /etc/vdr/New-hama-mce-remote.conf.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf New-hama-mce-remote.conf.tar.gz; rm -rf New-hama-mce-remote.conf.tar.gz;;
c) clear; cd /etc/vdr; wget https://www.dropbox.com/s/gvel64ykd3eyx07/hauppauge-remote.conf.tar.gz; cp -rf /etc/vdr/hauppauge-remote.conf.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf hauppauge-remote.conf.tar.gz; rm -rf hauppauge-remote.conf.tar.gz;;
d) clear; cd /etc/vdr; wget https://www.dropbox.com/s/t64duomj9f5hkqp/mce-spinel.remote.conf.tar.gz; cp -rf /etc/vdr/mce-spinel.remote.conf.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf mce-spinel.remote.conf.tar.gz; rm -rf mce-spinel.remote.conf.tar.gz;;
e) clear; cd /etc/vdr; touch remote.conf;;
f);;
esac 
#
apt-mark hold vdr
#
echo "Installation completed";
#
sleep 2;
# Start vdr
killall -9 vdr
#
/usr/local/bin/start-vdr.sh;;    
esac;; 
    
#############################################################################################################################  
#############################################################################################################################

4)                                        #########################################
                                          #     Install && Upgrade Settings       #
                                          #########################################
clear
echo "               *** Install W_scan ***"; sleep 1
cd $SRC; 
 if [ -f w_scan/Makefile ];
  		then echo "W_scan $Remind"
			else wget https://www.gen2vdr.de/wirbel/w_scan_cpp/w_scan-20210218.tar.bz2; tar xjf w_scan-20210218.tar.bz2; cp -rf w_scan-20210218 /home/`logname`/Vdrrepo/; mv -f w_scan-20210218 w_scan; cd w_scan; ./configure; make; make install;
	fi;
#
echo "               *** Install t2scan ***"; sleep 1
cd $SRC;
if [ -f /$SRC/t2scan/Makefile ];
  then  echo "t2scan $emind3"
else git clone https://github.com/mighty-p/t2scan; cp t2scan /home/`logname`/Vdrrepo/; cd t2scan; ./configure; make; make install;
fi
#
clear        
    dialog --title "   ** Install && Upgrade Settings **   " --infobox "
   --------------------------------------------------------------
                     Setup channell list
   --------------------------------------------------------------

                        
        ****   Sezione W_Scan/t2scan  ****
        [a]    Install Settings 9.0E - using W_scan
        [b]    Install Settings 13.0E - using W_scan
        [c]    Install Settings 19.2E - using W_scan
        [d]    Install Terrestrial Settings - using t2scan
                  
        [z]    Skip
        
   -------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-z]:      "
    read yourch
    case $yourch in
 
    ##### W_Scan/t2scan #####
a) clear; rm -rf /etc/vdr/channels-w_scan-9E0.conf; w_scan -fs -s S9E0 -D0c -o2 >> /etc/vdr/channels-w_scan-9E0.conf;; 
b) clear; rm -rf /etc/vdr/channels-w_scan-13E0.conf; w_scan -fs -s S13E0 -D1c -o2 >> /etc/vdr/channels-w_scan-13E0.conf;;
c) clear; rm -rf /etc/vdr/channels-w_scan-19E2.conf; w_scan -fs -s S19E2 -D2c -o2 >> /etc/vdr/channels-w_scan-19E2.conf;;
d) clear; rm -rf /etc/vdr/channels-dtt.conf; t2scan -stro -o -t0 >> /etc/vdr/channels-dtt.conf;;

z) ;;
#
esac;;
    
#############################################################################################################################  
#############################################################################################################################

5)                                        ##########################################################
                                          #                      Submenu - KODI                    #
                                          ##########################################################
                  
clear        
    dialog --title "   ** Install & Setup KODI **   " --infobox "
   --------------------------------------------------------------
                         Install/Remove Kodi
   --------------------------------------------------------------
        
        *****  Install  *****  ..........  *****  Remove  *****
        [a]    Install  ............  [a1]    Remove KODI  
        
        [z]    Skip
      
                   
   -------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice = Install [a] ~~ Remove [a1] ~~ Exit [z]:      "
    read yourch
    case $yourch in

a)
clear; apt-get -y install software-properties-common pkg-config;

#############################################################################################################################  
#############################################################################################################################

                                          ##########################################################
                                          #                      Install  KODI                     #
                                          ##########################################################
     
clear
    dialog --title "   ** KODI **   " --infobox "
   ----------------------------------------------
                KODI versions
   ----------------------------------------------
        [a]    Kodi Stable version 
        [b]    Kodi Release Candidate version                                
        [c]    Kodi Development version             
                                     
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-c]:      "
    read yourch
    case $yourch in

a)   clear; add-apt-repository ppa:team-xbmc/ppa; apt-get update; apt-get -y install kodi; apt install kodi-pvr-iptvsimple=3.9.8-1~focal;;
b)   clear; add-apt-repository ppa:team-xbmc/unstable; apt-get update;  apt-get -y install kodi; apt-get -y install kodi-pvr-iptvsimple;;
c)   clear; add-apt-repository ppa:team-xbmc/xbmc-nightly;  apt-get -y install kodi; apt-get -y install kodi-pvr-iptvsimple;;
esac 
# Kodi Picon
cd /usr/local/etc; wget https://www.dropbox.com/s/xo44q2fxdjltzk0/kodi_picon.tar.gz; cp -rf /usr/local/etc/kodi_picon.tar.gz /home/`logname`/Vdrrepo/; tar -zxvf kodi_picon.tar.gz; rm -rf kodi_picon.tar.gz;

     echo "                    Press Enter to continue ...               "; read enterKey;;

#############################################################################################################################
#############################################################################################################################

a1)                                       #########################################
                                          #               Remove KODI             #
                                          #########################################

clear
    echo "                    Remove KODI"; sleep 4
apt-get remove kodi*; apt-get purge kodi*; rm -rf ~/.kodi/; rm -rf /home/`logname`/.kodi/*; rm -rf /usr/share/kodi; add-apt-repository --remove ppa:team-xbmc/xbmc-nightly -y; add-apt-repository --remove ppa:team-xbmc/ppa -y; add-apt-repository --remove ppa:team-xbmc/unstable -y; rm -rf /home/`logname`/Scrivania/Kodi.desktop; rm -rf /usr/share/applications/Kodi.desktop;;
esac;;

#############################################################################################################################  
#############################################################################################################################

6)                                        #########################################
                                          #                Exit/Stop              #
                                          #########################################


    clear
    echo ""
    echo ""
    echo ""
    echo ""
    echo "                                                       .-----,        ,.----."
    echo "                                                .-----'       '------'       ',"
    echo "                                              ,'  First ed. by mona66 ® 2010   ',"
    echo "                                              '     Updated and Revision        '"
    echo "                                              ',  by fiveten_59 ® and knap ®    ,'"
    echo "                                              ,'   2013 ~ 2014 ~ 2015 ~ 2016      ',"
    echo "                                             '        vdr_2.4.6_ installer        '"
    echo "                                              ',        by fiveten_59 ®         '"
    echo "                                              ',               2021           ,'"
    echo "                                                '----,      ,----,       ,----'"
    echo "                                                      '----'      '-----'"
    echo "                                                                O"
    echo "                                                                 o "
    echo "                                                                  o  "
    echo "                                                                   °"
    echo "                                                                    °"
    echo "                                                                .88888888:.          "
    echo "                                                              88888888.88888.          "
    echo "                                                            .8888888888888888.          "
    echo "                                                            888888888888888888          "
    echo "                                                            88'..'888'..'88888          "
    echo "                                                            88'  '888'  '88888          "
    echo "                                                            88'..':::'..':8888          "
    echo "                                                            88:::,::,:::::8888          "
    echo "                                                            88':::::::::''8888          "
    echo "                                                           .88  '::::'    8:88.          "
    echo "                                                          8888            '8:888.          "
    echo "                                                        .8888'             '888888.          "
    echo "                                                       .8888:..  .::.  ...:'8888888:.          "
    echo "                                                      .8888.'     :'     ''::'88:88888          "
    echo "                                                     .8888        '         '.888:8888.          "
    echo "                                                    888:8         .           888:88888          "
    echo "                                                  .888:88        .:           888:88888:          "
    echo "                                                  8888888.       ::           88:888888          "
    echo "                                                  '.::.888.      ::          .88888888          "
    echo "                                                 .::::::.888.    ::         :::'8888'.:.          "
    echo "                                                ::::::::::.888   '         .::::::::::::          "
    echo "                                                ::::::::::::.8    '      .:8::::::::::::.          "
    echo "                                              .::::::::::::::.        .:888:::::::::::::          "
    echo "                                              :::::::::::::::88:.__..:88888:::::::::::'          "
    echo "                                               ''.:::::::::::88888888888.88:::::::::'          "
    echo "                                                     '':::_:' -- '' -'-' '':_::::''          "
    echo ""
    echo "                                                     Grazie a tutti e buon divertimento"
    echo "                                                               Have fun :-)"
    echo ""
    exit 0

;;
*) ;;
esac
done
