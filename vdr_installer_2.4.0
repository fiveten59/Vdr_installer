#!/bin/bash
################################## !!! README !!! #######################################
#                                                                                       #
# Script name: vdr_installer_2.4.0                                                     #
# Version: Github Repository Master (https://github.com/fiveten59/Vdr_installer)        #
# Tested on Unbuntu 16.04/18.04                                                                                      #
# chmod the script                                                                      #
# then load it simply typing: sudo ./vdr_installer_2.4.0                               #
#                                                                                       #
#########################################################################################
#
PLUGIN="--lirc -P'dvbapi' -P'skindesigner -l /etc/vdr/logos/ -i /usr/local/share/vdr/plugins/skindesigner/skins/' -P'skinflatplus -l /etc/vdr/logos/' -P'epgsearch' -P'weatherforecast' -P'iptv' -P'tvguide' -P'tvguideng' -P'externalplayer' -P'channelscan'"
#
USER='fiveten' 
ETC='/usr/local/etc'
SRC='/usr/local/src'
SRCVDR='/usr/local/src/vdr-2.4.0'
VDRSRC=''$SRC'/vdr/PLUGINS/src'
LIB='/usr/local/lib/vdr/plugins'
VDR='vdr-2.4.0'
PACKAGES="/usr/local/src/packages"
ARCHIVES="/usr/local/src/archives"
SCRIPTS="/usr/local/src/archives/scripts"
MANUALS="/usr/local/src/READ_THIS"
TEMP='/tmp'
SKINS='/usr/local/share/vdr/plugins/skindesigner/skins/'
SHARE='/usr/local/share/vdr/plugins'
PLUGINS='/etc/vdr/plugins'
Remind3='is already installed'
Remind4='are already installed'
Remind5='is not installed'
ALLOWED="#
# allowed_hosts.conf  This file describes a number of host addresses that
#                     are allowed to connect to the streamdev/vn****rver/xvdr/xinelioutput server running 
#                     with the Video Disk Recorder (VDR) on this system.
# Syntax:
#
# IP-Address[/Netmask]
#
127.0.0.1             # always accept localhost
192.168.1.0/24        # any host on the local net
192.168.0.0/24        # any host on the local net
#204.152.189.113      # a specific host
#0.0.0.0/0            # any host on any net (USE THIS WITH CARE!)
#
#
# If your network setup is correct pls don't touch
# exit with CTRL+X
#
# If your network setup is diiferent change it and
# Save it with CTRL+O and exit with CTRL+X "
#
#               Disecq
#
MONO13="#
# Full DiSEqC sequence:
# 13E
S13.0E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S13.0E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S13.0E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
MONO19="#
# Full DiSEqC sequence:
# 13E
S19.2E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S19.2E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S19.2E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S19.2E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T
#
"
DUAL="#
# Full DiSEqC sequence:
# 13 - 19.2E
S13.0E 11700 V  9750  t v W15 [E0 10 38 F0] W15 A W15 t
S13.0E 99999 V 10600  t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E 11700 H  9750  t V W15 [E0 10 38 F2] W15 A W15 t
S13.0E 99999 H 10600  t V W15 [E0 10 38 F3] W15 A W15 T

S19.2E  11700 V  9750  t v W15 [E0 10 38 F4] W15 B W15 t
S19.2E  99999 V 10600  t v W15 [E0 10 38 F5] W15 B W15 T
S19.2E  11700 H  9750  t V W15 [E0 10 38 F6] W15 B W15 t
S19.2E  99999 H 10600  t V W15 [E0 10 38 F7] W15 B W15 T
#
"
TRIAL="# Full DiSEqC sequence:
# 9 - 13 - 19.2E
S9E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S9E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S9E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S9E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S13.0E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S13.0E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S13.0E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S13.0E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S19.2E 11700 V  9750 t v W15 [E0 10 38 F8] W15 A W15 t
S19.2E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S19.2E 11700 H  9750 t V W15 [E0 10 38 FA] W15 A W15 t
S19.2E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T
#
"
TRIAL2="# Full DiSEqC sequence:
# 13 - 16 - 19.2E
S13.0E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S13.0E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S13.0E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S16.0E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S16.0E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S16.0E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S16.0E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S19.2E 11700 V 9750 t v W15 [E0 10 38 F8] W15 A W15 t
S19.2E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S19.2E 11700 H 9750 t V W15 [E0 10 38 FA] W15 A W15 t
S19.2E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T
#
"
QUADRI="# Full DiSEqC sequence:
# 13 - 19 - 23.5 - 28.2°E
S13.0E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S13.0E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S13.0E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S13.0E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S19.2E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S19.2E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S19.2E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S19.2E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S23.5E 11700 V  9750 t v W15 [E0 10 38 F8] W15 A W15 t
S23.5E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S23.5E 11700 H  9750 t V W15 [E0 10 38 FA] W15 A W15 t
S23.5E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T

S28.2E  11700 V  9750  t v W15 [E0 10 38 FC] W15 B W15 t
S28.2E  99999 V 10600  t v W15 [E0 10 38 FD] W15 B W15 T
S28.2E  11700 H  9750  t V W15 [E0 10 38 FE] W15 B W15 t
S28.2E  99999 H 10600  t V W15 [E0 10 38 FF] W15 B W15 T
#
"
QUADRI2="# Full DiSEqC sequence:
# 9 - 13 - 16 - 19.2°E
S9E  11700 V  9750 t v W15 [E0 10 38 F0] W15 A W15 T
S9E  99999 V 10600 t v W15 [E0 10 38 F1] W15 A W15 T
S9E  11700 H  9750 t V W15 [E0 10 38 F2] W15 A W15 T
S9E  99999 H 10600 t V W15 [E0 10 38 F3] W15 A W15 T

S13.0E 11700 V  9750 t v W15 [E0 10 38 F4] W15 B W15 t
S13.0E 99999 V 10600 t v W15 [E0 10 38 F5] W15 B W15 T
S13.0E 11700 H  9750 t V W15 [E0 10 38 F6] W15 B W15 t
S13.0E 99999 H 10600 t V W15 [E0 10 38 F7] W15 B W15 T

S16.0E 11700 V  9750 t v W15 [E0 10 38 F8] W15 A W15 t
S16.0E 99999 V 10600 t v W15 [E0 10 38 F9] W15 A W15 T
S16.0E 11700 H  9750 t V W15 [E0 10 38 FA] W15 A W15 t
S16.0E 99999 H 10600 t V W15 [E0 10 38 FB] W15 A W15 T

S19.2E  11700 V  9750  t v W15 [E0 10 38 FC] W15 B W15 t
S19.2E  99999 V 10600  t v W15 [E0 10 38 FD] W15 B W15 T
S19.2E  11700 H  9750  t V W15 [E0 10 38 FE] W15 B W15 t
S19.2E  99999 H 10600  t V W15 [E0 10 38 FF] W15 B W15 T
#
"
# 
    apt-get -y install dialog git cvs wget checkinstall	yasm mercurial
    apt-get -y install autoconf autopoint automake build-essential cmake libtool ;
    apt-get -y install libxcb1-dev libxcb-shm0-dev libxcb-xfixes0-dev  pkg-config texinfo;
    #
    exit_status_check()
    {
    if [ $? -ne 0 ]; then
    echo "Install did not run successfully";
    echo "                    Press Enter to continue ...               "; read enterKey; exit 1
   else
   echo "Install successful"
    fi   
    }

    press_enter()
    {
     echo "                    Press Enter to continue ...               "; read enterKey; exit 0
    }

    timer_start()
    {
    BEGIN=$(date +%s)
    }


    timer_stop()
    {
    NOW=$(date +%s)
    let DIFF=$(($NOW - $BEGIN))
    let MINS=$(($DIFF / 60))
    let SECS=$(($DIFF % 60))
    echo Time elapsed: $MINS:`printf %02d $SECS` >> $LOGFILE
    }

    line()
    {
    echo "-----------------------------------" >> $LOGFILE
    }
    # Make sure only root can run the script
    if [ "$(id -u)" != "0" ]; then
    echo "This script must be run as root" 1>&2
    exit 1
    fi
  
    

#############################################################################################################################  
#############################################################################################################################

                                          #########################################
                                          #                  MENU'                #
                                          #########################################


    mkdir $SRC/packages $SRC/archives $SRC/scripts $SRC/READ_THIS
    while :
    do
    dialog --title " VDR Installer Github Repository " --infobox "Copyright (C) 2018
                                                                        
    This file is part of VDR Complete Installer (VCI).                   
                                                                        
    VCI is free software: you can redistribute it and/or modify          
    it under the terms of the GNU General Public License as published by 
    the Free Software Foundation, either version 3 of the License, or    
    (at your option) any later version.                                  
                                                                        
    VCI is distributed in the hope that it will be useful,               
    but WITHOUT ANY WARRANTY; without even the implied warranty of       
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the        
    GNU General Public License for more details.                         
                                                                        
    You should have received a copy of the GNU General Public License    
    along with VCI. see the file VCI_License.GPL, If not see             
    <http://www.gnu.org/licenses/>.                                   
                                                                        
    Credit                                     
    =====================================                     
                                                                               
    Questo script e' stato creato per installare VDR in ambiente grafico        
    con l'aiuto di tutta la comunità vdr che conosco e tutta la loro esperienza   
    percio e' molto importante dare a loro credito          

    A special thanks goes to Klaus Schmidinger Vdr Developer     

    Ringraziamenti :                             
    a tutti gli user del sifteam forum e di vdritalia
    
    IN PARTICOLARE :                                
    Mona, Unixer, fiveten_59, Grazymax, Knap, jackblow33, Alez, Shalafi, Homer314, 
    Mr Cool Span, fusibile73, ceo16, Asgarot, Armando Basile, daredavil87, 
    Mld Team and many ... many oyhers.                             
                                                                              
    =====================================                     " 0 0
    echo "                    Press Enter to continue ...               "; read enterKey
    
    #
    #    
    dialog --title " VDR Installer Github Repository " --infobox "Copyright (C) 2018
    

	Script name: vdr_installer_2.4.0                                                  
	Version: Github Repository Master  (https://github.com/fiveten59/Vdr_installer) 
        Tested on Unbuntu 16.04/18.04                                                                          
	chmod the script
        then load it simply typing: sudo ./vdr_installer_2.4.0            
                                                                                       
                                                               " 0 0

###########################################################################################################

    echo "                    Press Enter to continue ...               "; read enterKey
    #
    #
    clear
    echo ""
    dialog --title "   ♦♦♦♦♦   VDR 2.4.0 Version Installer Script - Libraries & Codec  ♦♦♦♦♦   " --infobox "
          ╭===========================================================================================╮    
          |   ................♦♦♦   Download & Upgrade Local Repository   ♦♦♦...................  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [1]    +[Submenu] ~~  Local Repository Directory ~  Install - Upgrade  .............  |              
          |   =======================================================================================   |
          |   ..........♦♦♦   Audio Video & Codec Libraries - Install & Uninstall  ♦♦♦........  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [2]    +[Submenu] ~~  X264 git ~ X265 hg ~ Fdk-aac git ~ Libvpx git ~ FFmpeg git  .......  |         
          |   =======================================================================================   |
          |   .............♦♦♦                        VDR - Plugins  - Skin               ♦♦♦.........  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [3]    +[Submenu] ~~  VDR 2.4.0 & Plugins ................................................ |     
          |   =======================================================================================   |
          |   .............♦♦♦                    Channells Lists Setup                 ♦♦♦........  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [4]    +[Submenu] ~~  Channells Lists ~ Install ~ Uninstall  .............................  |     
          |   =======================================================================================   |
          |   .............................♦♦♦  KODI Setup  ♦♦♦.............................  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |
          |   [5]    +[Submenu] ~~  Kodi ~ Media Center ~ Install ~ Uninstall  .......................  |          
          |   =======================================================================================   |
          |   .............................♦♦♦   Utility Setup  ♦♦♦...........................  |
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |    
          |   [6]    +[Submenu] ~~  Check Configuration Files  .....................................  |          
          |   =======================================================================================   |
          |   .............................♦♦♦   Exit Setup Menu   ♦♦♦.......................  |          
          |   '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''  |              
          |   [7]     Exit  ..........................................................................  |  
          ╰===========================================================================================╯" 0 0

    echo -n "              Enter your menu choice = Submenu [1~6] -- Exit [7] :        "
    read yourch
    case $yourch in


#############################################################################################################################  
#############################################################################################################################

1)                                        #########################################
                                          #            Local Repository           #
                                          #########################################


    clear
    dialog --title "   ** Download & Upgrade Local Repository **   " --infobox "
   ---------------------------------------------------------------------------------------------
       Install ~ Upgrade ~ Remove ~ Local Repository 
        *****  Crea  ***** 
   ---------------------------------------------------------------------------------------------
        
        [a]  Install ~ (If Not Exist) ............ [b]  Remove & Upgrade 
        
        [z]  Skip      
        
   ---------------------------------------------------------------------------------------------" 0 0
    echo -n "        Enter your menu choice = Install [a] ~~ Remove & Upgrade [b] ~~ Exit [z]:      "
    read yourch
    case $yourch in
    a) clear; cd /home/`logname`; mkdir -p Vdrrepo;
    chmod -R 777 Vdrrepo;
    cd Vdrrepo;
    
############################### Download libraries on local repo ################################### 

if [ -s /home/`logname`/Vdrrepo/nasm-2.13.02.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget http://www.nasm.us/pub/nasm/releasebuilds/2.13.02/nasm-2.13.02.tar.bz2; 
  fi

if [ -s /home/`logname`/Vdrrepo/cmrt ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/01org/cmrt
  fi

if [ -s /home/`logname`/Vdrrepo/libva ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/libva;
  fi

if [ -s /home/`logname`/Vdrrepo/intel-hybrid-driver ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/01org/intel-hybrid-driver
  fi

if [ -s /home/`logname`/Vdrrepo/intel-vaapi-driver ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it Download ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/intel-vaapi-driver.git
  fi

if [ -s /home/`logname`/Vdrrepo/libva-utils ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File Presente ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/intel/libva-utils
  fi

if [ -s /home/`logname`/Vdrrepo/x264 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://git.videolan.org/x264.git;
  fi 

if [ -s /home/`logname`/Vdrrepo/x265 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    hg clone http://hg.videolan.org/x265;
  fi

if [ -s /home/`logname`/Vdrrepo/fdk-aac ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File doesn't exist ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/mstorsjo/fdk-aac.git;
  fi

if [ -d /home/`logname`/Vdrrepo/libvpx ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/webmproject/libvpx/
  fi

if [ -s /home/`logname`/Vdrrepo/libvorbis-1.3.6.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://ftp.osuosl.org/pub/xiph/releases/vorbis/libvorbis-1.3.6.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/ffmpeg-3.4.2.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
 echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget http://ffmpeg.org/releases/ffmpeg-3.4.2.tar.bz2;
  fi

################################ Download Vdr and Plugins on local repo ##############################

if [ -s /home/`logname`/Vdrrepo/vdr-2.4.0.tar.bz2 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget ftp://ftp.tvdr.de/vdr/vdr-2.4.0.tar.bz2;
  fi

if [ -s /home/`logname`/Vdrrepo/vdr-patches.2.4.0.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/krgqj35ioumcr0f/vdr-patches.2.4.0.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/Make.config.2.4.0 ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/3ry2jz01ghbncfp/Make.config.2.4.0;
  fi

if [ -s /home/`logname`/Vdrrepo/vdrsymbols.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/bx97ikp7c1h2qj2/vdrsymbols.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-epgsearch ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone http://projects.vdr-developer.org/git/vdr-plugin-epgsearch.git;
  fi

if [ -s /home/`logname`/Vdrrepo/patch_epgsearch.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/s9vggu8mil8ss7t/patch_epgsearch.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-dvbapi ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://github.com/manio/vdr-plugin-dvbapi.git; 
  fi

if [ -s /home/`logname`/Vdrrepo/patch_dvbapi.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/5tyvqkbhohbbju2/patch_dvbapi.tar.gz;
  fi  
  
if [ -s /home/`logname`/Vdrrepo/vdr-plugin-vaapidevice ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/pesintta/vdr-plugin-vaapidevice
  fi

if [ -s /home/`logname`/Vdrrepo/jinx.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://github.com/rellla/softhddevice-openglosd/archive/jinx.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/patch_softhddevice_5.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/qwi8p6ieb5z86gr/patch_softhddevice_5.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/patch_softhddevice_no_openglosd.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/pxjx9wnb71f2am4/patch_softhddevice_no_openglosd.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-xineliboutput ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/vdr-projects/vdr-plugin-xineliboutput.git
  fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-tvguide ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://projects.vdr-developer.org/vdr-plugin-tvguide.git;
  fi

if [ -s /home/`logname`/Vdrrepo/patch_tvguide.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/xkax9z6qumb76dj/patch_tvguide.tar.gz;
fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-tvguideng ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://projects.vdr-developer.org/vdr-plugin-tvguideng.git;
  fi

if [ -s /home/`logname`/Vdrrepo/patch_tvguideng.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/qjmzsml13sdhk0u/patch_tvguideng.tar.gz;
  fi

 if [ -s /home/`logname`/Vdrrepo/01_Add_language_It.patch.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/jrizzen5q8o07uv/01_Add_language_It.patch.tar.gz;
  fi 

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-iptv ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://github.com/rofafor/vdr-plugin-iptv.git; 
  fi

if [ -s /home/`logname`/Vdrrepo/patch_iptv.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"; 
    wget https://www.dropbox.com/s/nof5ydmxrplw2b0/patch_iptv.tar.gz;
fi

if [ -s /home/`logname`/Vdrrepo/iptv_conf.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"; 
    wget https://www.dropbox.com/s/1ujtklnct0nqq6q/iptv_conf.tar.gz;
fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-weatherforecast ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone git://projects.vdr-developer.org/vdr-plugin-weatherforecast.git  
  fi

if [ -s /home/`logname`/Vdrrepo/patch_weatherforecast.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/v0ipkt6x3bfbbs8/patch_weatherforecast.tar.gz;
fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-externalplayer ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://git.uli-eckhardt.de/vdr-plugin-externalplayer.git;
fi

if [ -s /home/`logname`/Vdrrepo/externalplayer.conf.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/vhz1fz68159s0qg/externalplayer.conf.tar.gz;
fi

if [ -s /home/`logname`/Vdrrepo/channelscan ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone https://bitbucket.org/ua0lnj/channelscan.git;    
fi

if [ -s /home/`logname`/Vdrrepo/satellite_pack.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/400whbxq4tzsbtq/satellite_pack.tar.gz;    
fi

################################# Download skins ########################################

if [ -s /home/`logname`/Vdrrepo/logos.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/omrs8wwh5jbz46e/logos.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/skin-flatplus ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    git clone http://projects.vdr-developer.org/git/skin-flatplus.git;
  fi
  
if [ -s /home/`logname`/Vdrrepo/icone.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/5uvx468b4b87auy/icone.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/lcars_pack.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/806odyj5vyco3dg/lcars_pack.tar.gz;
  fi 

if [ -s /home/`logname`/Vdrrepo/picon.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/hb2mv9ytz5q6yz7/picon.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/vdr-plugin-skindesigner ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
     git clone git://projects.vdr-developer.org/vdr-plugin-skindesigner.git
  fi 

if [ -s /home/`logname`/Vdrrepo/patch_skindesigner.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/8uiizh0d3t706ll/patch_skindesigner.tar.gz;
  fi   

if [ -s /home/`logname`/Vdrrepo/themes.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/m32a4s23h7r00mg/themes.tar.gz;
  fi

############################# Download others ##############################

if [ -s /home/`logname`/Vdrrepo/traduzioni.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/6hzpdx9yv5ypzxv/traduzioni.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/channels.conf.terr.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/4jmjiurewriu1sh/channels.conf.terr.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/channels.conf.dual.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/z3czcyw5za82utc/channels.conf.dual.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/channels.conf.hotbird.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.hotbird.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/channels.conf.astra.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.astra.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/channels.conf.trial.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/oebo5gddykvxng4/channels.conf.trial.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/channels.conf.radio.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/ryt4z222akmrh11/channels.conf.radio.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/hauppauge-remote.conf.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/gvel64ykd3eyx07/hauppauge-remote.conf.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/mce-remote.conf.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/hsp66258srhwa1d/mce-remote.conf.tar.gz;
  fi  
  
if [ -s /home/`logname`/Vdrrepo/oscam.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/56oomdr58os7msa/oscam.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/oscam64.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/lvs3eb7q64ericc/oscam64.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/setup16_softhddevice.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/873qnh3yxmnzo0o/setup16_softhddevice.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/setup16_vaapidevice.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/irj1su05tudvmns/setup16_vaapidevice.tar.gz;
  fi

if [ -s /home/`logname`/Vdrrepo/setup16_xineliboutput.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/irj1su05tudvmns/setup16_xineliboutput.tar.gz;
fi

if [ -s /home/`logname`/Vdrrepo/flat_weather.tar.gz ]; then
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File exists ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
else
  echo "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░¦¦¦¦¦¦:::: ..... File not present ... Downloading it now ..... ::::¦¦¦¦¦¦░░░░░░░░░░░░░░░░░░░░░░░░░░░░░";
    wget https://www.dropbox.com/s/v6o2zsjt7yvascy/flat_weather.tar.gz;
  fi

chmod -R 777 *;;
  
######################################################################################  

    b) clear; cd /home/`logname`/Vdrrepo; rm -rf *;

######################################################################################  
############################ Download libraries on local repo ####################################

    wget http://www.nasm.us/pub/nasm/releasebuilds/2.13.02/nasm-2.13.02.tar.bz2; 
    git clone https://github.com/01org/cmrt;
    git clone https://github.com/intel/libva;
    git clone https://github.com/01org/intel-hybrid-driver;
    git clone https://github.com/intel/intel-vaapi-driver.git;
    git clone https://github.com/intel/libva-utils;
    git clone git://git.videolan.org/x264.git;
    hg clone http://hg.videolan.org/x265;
    git clone https://github.com/mstorsjo/fdk-aac.git;
    git clone https://github.com/webmproject/libvpx;
    wget https://ftp.osuosl.org/pub/xiph/releases/vorbis/libvorbis-1.3.6.tar.gz;
    wget http://ffmpeg.org/releases/ffmpeg-3.4.2.tar.bz2;

############################ Download Vdr and Plugins on local repo ################################

    wget ftp://ftp.tvdr.de/vdr/vdr-2.4.0.tar.bz2;
    wget https://www.dropbox.com/s/krgqj35ioumcr0f/vdr-patches.2.4.0.tar.gz;
    wget https://www.dropbox.com/s/3ry2jz01ghbncfp/Make.config.2.4.0;
    wget https://www.dropbox.com/s/bx97ikp7c1h2qj2/vdrsymbols.tar.gz;
    git clone git://projects.vdr-developer.org/vdr-plugin-tvguide.git;
    wget https://www.dropbox.com/s/xkax9z6qumb76dj/patch_tvguide.tar.gz;
    git clone git://projects.vdr-developer.org/vdr-plugin-tvguideng.git;
    wget https://www.dropbox.com/s/qjmzsml13sdhk0u/patch_tvguideng.tar.gz;
    git clone https://github.com/pesintta/vdr-plugin-vaapidevice;
    wget https://github.com/rellla/softhddevice-openglosd/archive/jinx.tar.gz;
    wget https://www.dropbox.com/s/qwi8p6ieb5z86gr/patch_softhddevice_5.tar.gz;
    wget https://www.dropbox.com/s/pxjx9wnb71f2am4/patch_softhddevice_no_openglosd.tar.gz;
    git clone https://github.com/vdr-projects/vdr-plugin-xineliboutput.git
    git clone http://projects.vdr-developer.org/git/vdr-plugin-epgsearch.git;
    wget https://www.dropbox.com/s/s9vggu8mil8ss7t/patch_epgsearch.tar.gz;
    git clone git://github.com/manio/vdr-plugin-dvbapi.git;
    wget https://www.dropbox.com/s/5tyvqkbhohbbju2/patch_dvbapi.tar.gz;
    git clone git://projects.vdr-developer.org/vdr-plugin-weatherforecast.git;
    wget https://www.dropbox.com/s/v0ipkt6x3bfbbs8/patch_weatherforecast.tar.gz;
    git clone https://github.com/rofafor/vdr-plugin-iptv.git; 
    wget https://www.dropbox.com/s/nof5ydmxrplw2b0/patch_iptv.tar.gz;
    wget https://www.dropbox.com/s/1ujtklnct0nqq6q/iptv_conf.tar.gz;
    git clone https://git.uli-eckhardt.de/vdr-plugin-externalplayer.git;
    wget https://www.dropbox.com/s/vhz1fz68159s0qg/externalplayer.conf.tar.gz;
    git clone https://bitbucket.org/ua0lnj/channelscan.git;   
    wget https://www.dropbox.com/s/400whbxq4tzsbtq/satellite_pack.tar.gz;   


############################ Download skins ########################################

    wget https://www.dropbox.com/s/zwb0vp6gfwh7d4y/anthra_pack.tar.gz;
    git clone git://projects.vdr-developer.org/vdr-plugin-skindesigner.git;
    wget https://www.dropbox.com/s/8uiizh0d3t706ll/patch_skindesigner.tar.gz;
    git clone http://projects.vdr-developer.org/git/skin-flatplus.git;
    wget https://www.dropbox.com/s/806odyj5vyco3dg/lcars_pack.tar.gz;

############################ Download others #######################################      
    wget https://www.dropbox.com/s/6hzpdx9yv5ypzxv/traduzioni.tar.gz;
    wget https://www.dropbox.com/s/jrizzen5q8o07uv/01_Add_language_It.patch.tar.gz;
    wget https://www.dropbox.com/s/z3czcyw5za82utc/channels.conf.dual.tar.gz;
    wget https://www.dropbox.com/s/oebo5gddykvxng4/channels.conf.trial.tar.gz;
    wget https://www.dropbox.com/s/4jmjiurewriu1sh/channels.conf.terr.tar.gz;
    wget https://www.dropbox.com/s/vt0wxz86c3x6y1n/channels.conf.astra.tar.gz;
    wget https://www.dropbox.com/s/ryt4z222akmrh11/channels.conf.radio.tar.gz;
    wget https://www.dropbox.com/s/hsp66258srhwa1d/mce-remote.conf.tar.gz;
    wget https://www.dropbox.com/s/gvel64ykd3eyx07/hauppauge-remote.conf.tar.gz;
    wget https://www.dropbox.com/s/5uvx468b4b87auy/icone.tar.gz;
    wget https://www.dropbox.com/s/56oomdr58os7msa/oscam.tar.gz;
    wget https://www.dropbox.com/s/lvs3eb7q64ericc/oscam64.tar.gz;
    wget https://www.dropbox.com/s/hb2mv9ytz5q6yz7/picon.tar.gz;
    wget https://www.dropbox.com/s/m32a4s23h7r00mg/themes.tar.gz;
    wget https://www.dropbox.com/s/omrs8wwh5jbz46e/logos.tar.gz;
    wget https://www.dropbox.com/s/873qnh3yxmnzo0o/setup16_softhddevice.tar.gz;
    wget https://www.dropbox.com/s/irj1su05tudvmns/setup16_vaapidevice.tar.gz;
    wget https://www.dropbox.com/s/irj1su05tudvmns/setup16_xineliboutput.tar.gz;
    wget https://www.dropbox.com/s/v6o2zsjt7yvascy/flat_weather.tar.gz;
    #
    chmod -R 777 *;;
    #echo "                    Press Enter to continue ...               "; 
  
    
#############################################################################################################################  

    z) ;;
    esac
    echo " Press Enter to continue ... "; read enterKey;;
    
    
#############################################################################################################################  
#############################################################################################################################

2)                                        #######################################################
                                          #  Submenu - X264 - X265 - FDK-AAC - LIBVPX - FFMPEG  # libva-utils
                                          #######################################################
                  
    clear        
    dialog --title "   ** Install Assembler - Libraries & Codec - X264 - X265 - FDK-AAC - LIBVPX - FFMPEG **   " --infobox "
   --------------------------------------------------------------------------------------------------------------------
                                     Install or Remove Libraries
   --------------------------------------------------------------------------------------------------------------------
        
        *****  Install  *****  .................................................  *****  Remove  *****

        *****  Install  *****  ............................  *****  Remove  *****

        *****                    Sezione schede Intel                       ***** 
        [a]    Cmrt Git ...................................  [a1]    Cmrt Git
        [b]    Libva ......................................  [b1]    Libva 
        [c]    Intel hybrid driver ........................  [c1]    Intel hybrid driver
        [d]    Intel vaapi driver .........................  [d1]    Intel vaapi driver
        [e]    Libva-utils ................................  [e1]    Libva-utils

        *****                    Sezione schede Nvidia e Intel                     ***** 

        [f]    Nasm .......................................  [f1]    Nasm
        [g]    X264 Git ...................................  [g1]    X264 Git
        [h]    X265 HG  ...................................  [h1]    X265 HG
        [i]    FDK-AAC Git  ...............................  [i1]    FDK-AAC Git
        [l]    Libvpx .....................................  [l1]    Libvpx 
        [m]    Libvorbis ..................................  [m1]    Libvorbis

         *****                    Sezione comune                           ***** 
        [n]    FFMPEG .....................................  [n1]    FFMPEG
        
        [z]    Skip

   -------------------------------------------------------------------------------------------------------------------- 
   -------------------------------------------------------------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice = Install [a-n] ~~ Remove [a1-n1] ~~ Exit [z]:      "
    read yourch
    case $yourch in

#############################################################################################################################  
#############################################################################################################################

a)                                        #########################################
                                          #                   Cmrt                #
                                          #########################################

    sudo apt-get -y install libva-dev  #  controllare libva
    sudo apt-get -y install zlib1g-dev libass-dev libdrm-dev libvorbis-dev libogg-dev 
    sudo apt-get -y install libx11-dev libperl-dev libpciaccess-dev libpciaccess0

    clear
    echo "                    Installing Cmrt "; sleep 3

    cd /usr/local/src
    rm -rf cmrt
    cp -rf /home/`logname`/Vdrrepo/cmrt /usr/local/src/;
    cd cmrt
    ./autogen.sh
    ./configure
    time make -j4 VERBOSE=1
    sudo make -j4 install;;   
#############################################################################################################################  
#############################################################################################################################

b)                                        #########################################
                                          #                  LIBVA                #
                                          #########################################


#    apt-get -y install libwayland-dev
    clear
    echo "                    Installing Libva "; sleep 3
    cd /usr/local/src;
    rm -rf libva;
    cp -rf /home/`logname`/Vdrrepo/libva /usr/local/src/;
    cd libva
    ./autogen.sh
    make 
    make install 
    rm -rf /etc/ld.so.conf;
    touch /etc/ld.so.conf;
    echo 'include /etc/ld.so.conf.d/*.conf
/usr/local/lib
/usr/local/lib/dri' >> /etc/ld.so.conf;;  

#############################################################################################################################  
#############################################################################################################################
  
b1)                                       #########################################
                                          #            Rimozione LIBVA            #
                                          #########################################


    clear
    echo "                    Removing Libva "; sleep 3
    apt-get -y purge libva; rm -r /usr/local/src/libva; rm /usr/local/src/packages/libva*;;
 
#############################################################################################################################  
#############################################################################################################################

c)                                        #######################################################
                                          #                  Intel hybrid driver                #
                                          #######################################################



    clear
    echo "        Installing Intel hybrid driver "; sleep 3
    cd /usr/local/src;
    rm -rf intel-hybrid-driver;
    cp -rf /home/`logname`/Vdrrepo/intel-hybrid-driver /usr/local/src/;
    cd intel-hybrid-driver
    ./autogen.sh
    ./configure
    make -j4 VERBOSE=1
    make -j4 install
;;
#############################################################################################################################  
#############################################################################################################################

d)                                        #######################################################
                                          #                  Intel vaapi driver                 #
                                          #######################################################



    clear
    echo "        Installing Intel vaapi driver "; sleep 3
    cd /usr/local/src;
    rm -rf intel-vaapi-driver;
    cp -rf /home/`logname`/Vdrrepo/intel-vaapi-driver /usr/local/src/;
    cd intel-vaapi-driver
    ./autogen.sh
    ./configure --enable-hybrid-codec
    make -j4 VERBOSE=1
    make -j4 install  
;;
#############################################################################################################################  
#############################################################################################################################

e)                                        #######################################################
                                          #                       Libva-utils                   #
                                          #######################################################



    clear
    echo "        Installing Libva-utils "; sleep 3
    cd /usr/local/src;
    rm -rf libva-utils
    cp -rf /home/`logname`/Vdrrepo/libva-utils /usr/local/src/;
    cd libva-utils
    ./autogen.sh
    ./configure
    make -j4 VERBOSE=1
    make -j4 install;;

#############################################################################################################################  
#############################################################################################################################

f)                                        ###################################################
                                          #                        Nasm                     #
                                          ###################################################

    clear
    echo "                    Installing Nasm "; sleep 4
    cd /usr/local/src;
    cp -rf /home/`logname`/Vdrrepo/nasm-2.13.02.tar.bz2 /usr/local/src && tar xjvf nasm-2.13.02.tar.bz2 && rm -rf nasm-2.13.02.tar.bz2 && cd nasm-2.13.02 && ./autogen.sh && ./configure && make && make install;;


#############################################################################################################################  
#############################################################################################################################

g)                                        #########################################
                                          #                   X264                #
                                          #########################################


    clear
    echo "                    Installing X264 - Git"; sleep 4
    cd /usr/local/src; mkdir -p ffmpeg_sources; cd ffmpeg_sources
    rm -Rf $SRC/ffmpeg_sources/x264;
    cp -rf /home/`logname`/Vdrrepo/x264 /usr/local/src/ffmpeg_sources;
    cd x264; git checkout stable;
    ./configure --enable-pic --enable-shared --extra-cflags="-mtune=native -march=native -mfpmath=sse -O4 -pipe"
    make -j4
    checkinstall --pkgname=x264 --pkgversion="2:26.09.2015-git" --bk --default --deldoc=yes --pakdir=$PACKAGES
    ldconfig -v;;  


#############################################################################################################################  
#############################################################################################################################

g1)                                       #########################################
                                          #               Remove X264             #
                                          #########################################


    clear
    echo "                    Removing X264 - Git"; sleep 4
    apt-get -y purge x264; rm -rf /usr/local/src/ffmpeg_sources/x264; rm /usr/local/src/packages/x264*;;
  

#############################################################################################################################  
#############################################################################################################################

h)                                        #########################################
                                          #                  X265                 #
                                          #########################################


    apt-get -y remove x265
    clear
    echo "                    Installing X265 - Git"; sleep 4

    rm -Rf $SRC/ffmpeg_sources/x265
    cd /usr/local/src/ffmpeg_sources
    cp -rf /home/`logname`/Vdrrepo/x265 /usr/local/src/ffmpeg_sources
    cd x265/build/linux;
    ./make-Makefiles.bash
    make -j4
    checkinstall --pkgname=x265 --pkgversion="2:1.7-git" --bk --default --deldoc=yes --pakdir=$PACKAGES;
    ldconfig -v;;

    
    

#############################################################################################################################  
#############################################################################################################################

h1)                                       #########################################
                                          #               Remove X265             #
                                          #########################################


    clear
    echo "                    Removing X265 - Git"; sleep 4
    apt-get -y purge x265; rm -rf /usr/local/src/ffmpeg_sources/x265; rm -rf /usr/local/src/packages/x265*;;



#############################################################################################################################  
#############################################################################################################################

i)                                        #########################################
                                          #                 FDK-AAC               #
                                          #########################################



    clear
    echo "                    Installing Fdk-aac - Git"; sleep 4
    cd /usr/local/src/ffmpeg_sources
    rm -Rf fdk-aac
    cp -Rf /home/`logname`/Vdrrepo/fdk-aac /usr/local/src/ffmpeg_sources; cd fdk-aac;  
    ./autogen.sh
    ./configure --enable-shared --enable-static
    make -j4
    checkinstall --pkgname=fdk-aac --pkgversion="0.1.x-git" --backup=no --deldoc=yes --fstrans=no --default --pakdir=$PACKAGES;;

    
    

#############################################################################################################################  
#############################################################################################################################

i1)                                       #########################################
                                          #               Remove FDK-AAC          #
                                          #########################################


    clear
    echo "                    Removing Fdk-aac - Git"; sleep 4
    apt-get -y purge fdk-aac; rm -rf /usr/local/src/ffmpeg_sources/fdk-aac; rm -rf /usr/local/src/packages/fdk-aac*;;

    

    
#############################################################################################################################  
#############################################################################################################################

l)                                        #########################################
                                          #                  LIBVPX               #
                                          #########################################




    clear
    echo "                    Installing Libvpx "; sleep 4
    cd /usr/local/src/ffmpeg_sources; rm -Rf libvpx; cp -rf /home/`logname`/Vdrrepo/libvpx /usr/local/src/ffmpeg_sources;
    cd libvpx
    ./configure --prefix="$HOME/bin" --enable-runtime-cpu-detect --enable-vp9 --enable-vp8 \
   --enable-postproc --enable-vp9-postproc --enable-multi-res-encoding --enable-webm-io --enable-vp9-highbitdepth --enable-onthefly-bitpacking --enable-realtime-only \
   --cpu=native --as=yasm
    make -j4
    checkinstall --pkgname=libvpx --pkgversion="1.6.1-git" --backup=no --deldoc=yes --fstrans=no --default --pakdir=$PACKAGES;;


#############################################################################################################################  
#############################################################################################################################

l1)                                       #########################################
                                          #            Remove LIBVPX              #
                                          #########################################


    clear
    echo "                    Removing Libvpx "; sleep 4
    apt-get -y purge libvpx; rm -rf /usr/local/src/ffmpeg_sources/libvpx; rm -rf /usr/local/src/packages/libvpx*;;

#############################################################################################################################  
#############################################################################################################################

m)                                        ###############################################
                                          #                   Libvorbis                 #
                                          ###############################################
    clear
    echo "                    Installing Libvorbis "; sleep 4
    apt-get -y install libogg-dev
    cd /usr/local/src/ffmpeg_sources; rm -Rf libvorbis; cp -rf /home/`logname`/Vdrrepo/libvorbis-1.3.6.tar.gz /usr/local/src/ffmpeg_sources;
    tar -zxvf libvorbis-1.3.6.tar.gz; mv -f libvorbis-1.3.6 libvorbis; rm -rf libvorbis-1.3.6.tar.gz;
    cd libvorbis; ./configure --enable-static --prefix="$HOME/bin"
    ./configure --enable-static --prefix="$HOME/bin"
    time make -j4
    time make -j4 install;;


#############################################################################################################################  
#############################################################################################################################

n)                                        #################################################
                                          #                     FFmpeg                    #        
                                          #################################################


    clear
    apt-get -y install 
    apt-get -y install libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev libxcb-screensaver0-dev libvorbis-dev
    apt-get -y install libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev libxcb-icccm4-dev libxcb-keysyms1-dev
    apt-get -y install libtheora-dev libxvidcore-dev libvdpau-dev libmp3lame-dev libogg-dev libfreetype6-dev
if [ -f /usr/local/nv-codec-headers/makefile ];
  then  echo "nv-codec-headers are already installed"
else
    cd /usr/local/src/ffmpeg_sources; git clone https://git.videolan.org/git/ffmpeg/nv-codec-headers.git; cd nv-codec-headers; make; make install;
fi
    echo "                    Wait for a few seconds ...";
    cd /usr/local/src/ffmpeg_sources;
    rm -Rf ffmpeg
    cp -rf /home/`logname`/Vdrrepo/ffmpeg-3.4.2.tar.bz2 /usr/local/src/ffmpeg_sources; tar xivf ffmpeg-3.4.2.tar.bz2; mv ffmpeg-3.4.2 ffmpeg; rm -rf ffmpeg-3.4.2.tar.bz2; cd ffmpeg; ./configure --extra-libs="-ldl" --enable-gpl --enable-libfdk-aac --enable-libfreetype --enable-libmp3lame --enable-libxcb --disable-libopus --enable-libtheora --enable-libvorbis --disable-libvpx --enable-libx264 --enable-libx265 --enable-nonfree --enable-libxvid --enable-vdpau --enable-vaapi --enable-pic --enable-shared --disable-nvenc --disable-doc --enable-avresample 
    echo "                    Press Enter to continue ...               "; read enterKey;
    make -j4 install
    echo "                    Press Enter to continue ...               "; read enterKey;;

#############################################################################################################################  
#############################################################################################################################

n1)                                       ####################################################
                                          #                Remove FFmpeg (Git Version)       #
                                          ####################################################


    clear
    echo "                    Removing FFmpeg "; sleep 4
    rm -rf /usr/local/src/ffmpeg_sources/ffmpeg; rm /usr/local/src/packages/ffmpeg*;; 
    #esac
    #echo "                    Press Enter to continue ...               "; read enterKey;;


#############################################################################################################################  
#############################################################################################################################


z) ;;
    esac
    echo "                    Press Enter to continue ...               "; read enterKey;;
   
    
#############################################################################################################################  
#############################################################################################################################

3)                                        ##########################################################
                                          #        Submenu - VDR-2.4.x & Basic plugins             #
                                          ##########################################################
                  
    clear        
    dialog --title "   ** Install VDR-2.4.x & Basic plugins   **   " --infobox "
   ---------------------------------------------------------------------------------------------
        
        *****  Install  *****  .....................  *****  Remove  *****
   
        [a]    Install VDR-2.4.x & Basic plugins ........  [a1]    Remove VDR-2.4.x & Basic plugins
        [b]    First VDR Setup ..........................  [b1]    Remove VDR Setup
        
        [z]    Skip
   
   --------------------------------------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice = Install [a-b] ~~ Remove [a1-b1] ~~ Exit [z]:      "
    read yourch
    case $yourch in
    

#############################################################################################################################  
#############################################################################################################################

                                                                                                                          
a)                                        #########################################
                                          #        VDR-2.4.0 & Basic plugins      #
                                          #########################################


    clear
    echo "vdr ALL=(ALL) ALL" >> /etc/sudoers; 
    echo "*** Install libraries ***"; sleep 4 
    cd $SRC; 
    apt-get -y install libfontconfig1-dev libfreetype6-dev libfribidi-dev gettext binutils libglibmm-2.4-dev
    apt-get -y install libcap-dev libjpeg-dev libtinyxml-dev libncurses5-dev libncursesw5-dev
#
#
    clear    
    echo "               Installing VDR 2.4.0      "; sleep 1

    cp -rf /home/`logname`/Vdrrepo/$VDR.tar.bz2 $SRC/; tar xivf $VDR.tar.bz2;
    ln -s $VDR vdr; rm -rf $VDR.tar.bz2
    cd vdr; 
    echo "               Patching VDR 2.4.0      "; sleep 1
    cp -rf /home/`logname`/Vdrrepo/vdr-patches.2.4.0.tar.gz $SRC/vdr/; tar -zxvf vdr-patches.2.4.0.tar.gz; rm -rf vdr-patches.2.4.0.tar.gz; sleep 1;
echo "                  *** fix_svdrp_modt_recflag ***"
    patch -p1 < 00_kls_01_fix_svdrp_modt_recflag.patch; sleep 1;
echo "                  *** fix_invalid_lock ***"
    patch -p1 < 00_kls_02-fix_invalid_lock.patch; sleep 1;
echo "                  *** fix-locking-channel-display  ***"
    patch -p1 < 03-fix-locking-channel-display.diff; sleep 1;
echo "                  *** zapcockpit ***"
    patch -p1 < 02_vdr_zapcockpit.patch; sleep 1;
echo "                  *** menuselection ***"
    patch -p1 < 04_vdr_menuselection.patch; sleep 1;
echo "                  *** editrecording ***"
    patch -p1 < 05_vdr_editrecording.patch; sleep 1;
echo "                  *** avcdescriptor ***"
    patch -p1 < 06_vdr_avcdescriptor.patch; sleep 1;
echo "                  *** epgsearch ***"
    patch -p1 < 10_vdr_epgsearch_exttimeredit_vdr-2.3.5.patch; sleep 1;
echo "                  *** pin ***"
    patch -p1 < 12_vdr_pin.patch; sleep 1;
echo "                  *** mainmenuhooks ***"
    patch -p1 < 15_vdr_mainmenuhooks_vdr234.patch; sleep 1;
echo "                  *** wareagleicon ***"
    patch -p1 < 16_vdr_wareagleicon.patch; sleep 1;
echo "                  *** config ***"
    patch -p1 < 20_vdr_config.patch; sleep 1;
echo "                  *** svdrphosts ***"
    patch -p1 < 22_vdr_svdrphosts.patch; sleep 1;
echo "                  *** maxdevice ***"
    patch -p1 < 23_vdr_maxdevice.patch; sleep 1;
echo "                  *** dvb_power_saving ***"
    patch -p1 < 24_vdr_dvb_power_saving_feature.patch; sleep 1;
echo "                  *** gcc7 ***"
    patch -p1 < 25_vdr_gcc7.patch; sleep 1;
echo "                  *** menuorg ***"
    patch -p1 < 26_vdr_menuorg.patch; sleep 1;
echo "                  *** permashift ***"
    patch -p1 < 27_vdr_permashift.patch.x86; sleep 1;
echo "                  *** dvbchan ***"
    patch -p1 < vdr-dvbchan.patch; sleep 1;
echo "                  *** ci_debug ***"
    patch -p1 < 99_vdr_ci_debug.patch; sleep 1;
    # 
    cp -rf /home/`logname`/Vdrrepo/Make.config.2.4.0 $SRC/vdr/; mv Make.config.2.4.0 Make.config; sleep 1;
#    sed -i 's/|| DVB_API_VERSION_MINOR != 0//' dvbdevice.h
    #
    cp -rf $VDRSRC/pictures/pic2mpg /usr/local/bin/;
    #
    make && make plugins
    exit_status_check;
    clear
    echo ""; echo "*** Final compilation ***"; echo ""
    cd /usr/local/src/vdr
    apt-get -y purge vdr
    checkinstall --fstrans=no --install=yes --pkgname=vdr --pkgversion "2.4.0-git" --pakdir=$PACKAGES --default
    rm -rf /media/video; mkdir /media/video; mkdir -p /usr/local/lib/vdr/scripts;
    mkdir -p /etc/vdr/plugins; cp *.conf /etc/vdr; mkdir -p /usr/local/lib/vdr/plugins;

    clear    
    echo "*** keymacros.conf setup ***";
    rm -rf /etc/vdr/keymacros.conf; cd $SRCVDR; cp -rf vdr /usr/local/bin/; touch /etc/vdr/keymacros.conf
    clear
    echo "# Remote control key macros for VDR
#
# Format:
#
# macrokey  key1 key2 key3...
# macrokey  @plugin key1 key2 key3...
#
# See man vdr(5)

Red       Recordings
Green     @weatherforecast
Yellow    Info
Blue      @tvguideng
Ok        Channels" >> /etc/vdr/keymacros.conf
#
/usr/local/bin/vdr --help; exit_status_check
#
###########################################################
#        Italian translation for some plugins             #
###########################################################
cd $SRC; mkdir -p traduzioni; cd traduzioni;
cp /home/`logname`/Vdrrepo/traduzioni.tar.gz /$SRC/traduzioni/;
tar -zxvf traduzioni.tar.gz; rm -rf traduzioni.tar.gz;
###############################################################
# Install Basic plugins
clear
echo "                        "
echo "                        "
echo "                        "
echo "Install Basic plugins  ( Dvbapi - Vdaapidevice / Softhddevice / Xineliboutput - Epgsearch  - TvGuide - Iptv - ExternalPlayer - Channelscan - Skinflatplus - Skindesigner - TvGuideng - Weatherforecast)"
echo "                 Press Enter to continue ...         "; read enterKey
cd $SRC;
mkdir -p /usr/local/lib/vdr/plugins; mkdir -p /usr/local/lib/vdr/scripts; mkdir -p /etc/vdr/plugins; mkdir -p /etc/vdr/themes; cd $PLUGINS; mkdir -p tvguide;
#
#
clear 
echo ""; echo "               *** Dvbapi ***"; echo ""; sleep 3
cd $VDRSRC; 
cp -rf /home/`logname`/Vdrrepo/vdr-plugin-dvbapi /$VDRSRC/; mv vdr-plugin-dvbapi dvbapi; cd dvbapi; cp -rf /home/`logname`/Vdrrepo/patch_dvbapi.tar.gz /$VDRSRC/dvbapi/; tar -zxvf patch_dvbapi.tar.gz; rm -rf patch_dvbapi.tar.gz; patch -p1 < vdr-plugin-dvbapi-01_crosscompiling.patch; sleep 1; cd ../../..; make plugins
#
#
					echo "               *** Setup remote  ***"; sleep 1
clear        
    				dialog --title "   ** Setup Vaapidevice / Softhddevice / Xineliboutput **   " --infobox "
   				-------------------------------------------------------------------------
                				Setup Vaapidevice only for Intel graphic cards             
  				-------------------------------------------------------------------------
			        [a]    Vaapidevice              
   				-------------------------------------------------------------------------
                				Setup Softhddevice only for Nvidia graphic cards             
  				-------------------------------------------------------------------------     
			        [b]    Softhddevice openglosd                  
			        [c]    Softhddevice no openglosd 

   				-------------------------------------------------------------------------
                				Setup Xineliboutput Intel/Nvidia graphic cards             
  				------------------------------------------------------------------------- 
			        [d]    Xineliboutput                                         
        
   				------------------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-d]:      "
    read yourch
    case $yourch in
    
a) echo ""; echo "               *** Vaapidevice***"; echo ""; sleep 3
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6  
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-vaapidevice /$VDRSRC/ && mv vdr-plugin-vaapidevice vaapidevice && cd vaapidevice && export PKG_CONFIG_PATH="usr/local/src/libva/lib/pkgconfig:usr/local/src/ffmpeg_sources/ffmpeg/lib/pkgconfig" && make && make install;;

b) echo ""; echo "               *** Softhddevice openglosd***"; echo ""; sleep 3
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6  
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
cd $VDRSRC; 
cp -rf /home/`logname`/Vdrrepo/jinx.tar.gz /$VDRSRC/; tar -zxvf jinx.tar.gz; rm -rf jinx.tar.gz; mv softhddevice-openglosd-jinx softhddevice; cd softhddevice; cp -rf /home/`logname`/Vdrrepo/patch_softhddevice_5.tar.gz /$VDRSRC/softhddevice; tar -zxvf patch_softhddevice_5.tar.gz; rm -rf patch_softhddevice_5.tar.gz; patch -p1 < 03_LanguageIT.patch; patch -p1 < 10_softhddevice_trusty.patch; patch -p1 < 11_softhddevice_Makefile.patch; patch -p1 < 13_softhddevice_fixmemleakvaapi.patch; patch -p1 < 14_softhddevice_vaapi100.patch; patch -p1 < 16_softhddevice_no-inactive-reset-on-attache.patch; make ALSA=1 OSS=0 VDPAU=1 VAAPI=0 SCREENSAVER=0 SWRESAMPLE=1; make install;;

c) echo ""; echo "               *** Softhddevice no openglosd***"; echo ""; sleep 3      
apt-get -y install libx11-xcb-dev libxcb-dpms0-dev libxcb-glx0-dev libxcb-randr0-dev 
apt-get -y install libxcb-screensaver0-dev libxcb-xv0-dev libxcb-image0-dev libxcb-util0-dev 
apt-get -y install libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-ewmh-dev libasound2-dev libxext6  
apt-get -y install libglm-dev libglew-dev freeglut3-dev libc6-dev libogg0 libxext-dev
cd $VDRSRC; 
cp -rf /home/`logname`/Vdrrepo/jinx.tar.gz /$VDRSRC/; tar -zxvf jinx.tar.gz; rm -rf jinx.tar.gz; mv softhddevice-openglosd-jinx softhddevice; cd softhddevice; cp -rf /home/`logname`/Vdrrepo/patch_softhddevice_no_openglosd.tar.gz /$VDRSRC/softhddevice; tar -zxvf patch_softhddevice_no_openglosd.tar.gz; rm -rf patch_softhddevice_no_openglosd.tar.gz; patch -p1 < 03_LanguageIT.patch; patch -p1 < 10_softhddevice_trusty.patch; patch -p1 < Makefile_noopenglosd.patch; patch -p1 < 13_softhddevice_fixmemleakvaapi.patch; patch -p1 < 14_softhddevice_vaapi100.patch; patch -p1 < 16_softhddevice_no-inactive-reset-on-attache.patch; make ALSA=1 OSS=0 VDPAU=1 VAAPI=0 SCREENSAVER=0 SWRESAMPLE=1; make install;;

d) echo ""; echo "               *** Xineliboutput***"; echo ""; sleep 3      
cd $VDRSRC; apt-get -y install autopoint libxine2-dev libxrender-dev libextractor-dev libxrandr-dev libxine2-ffmpeg mjpegtools;
if [ -f $PACKAGES/libxine2*.deb ]; then
    echo "Xine-lib $Remind"; 
    	else cd $SRC; wget http://sourceforge.net/projects/xine/files/xine-lib/1.2.9/xine-lib-1.2.9.tar.xz; tar -xJf xine-lib-1.2.9.tar.xz; mv xine-lib-1.2.9 xine-lib; rm -rf xine-lib-1.2.9.tar.xz; cd xine-lib; export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH; ./autogen.sh --disable-dxr3 --enable-w32dll --with-pic --with-w32-path=/usr/local/lib/win32; make -j4; checkinstall --fstrans=no --install=yes --pkgname=libxine2 --pkgversion "1.2.9-git" --pakdir=$PACKAGES --default
	fi
cd $VDRSRC; 
cp -rf /home/`logname`/Vdrrepo/vdr-plugin-xineliboutput /$VDRSRC/; mv -f vdr-plugin-xineliboutput xineliboutput; cd xineliboutput; make; make install; cd ../../..; make plugins; mkdir -p /etc/vdr/plugins/xineliboutput; cp -rf /usr/local/src/vdr/PLUGINS/src/xineliboutput/*.mpg /etc/vdr/plugins/xineliboutput; cp -rf /usr/local/src/vdr/PLUGINS/src/xineliboutput/examples/remote.conf.example /etc/vdr/plugins/xineliboutput/remote.conf; echo "*** allowed_hosts.conf setup ***";;
esac
# 
#
clear
echo ""; echo "               *** Epgsearch ***"; echo ""; sleep 3
cd $VDRSRC;
apt-get -y install libc6 libgcc1 libstdc++6
cp -rf /home/`logname`/Vdrrepo/vdr-plugin-epgsearch /$VDRSRC/; mv vdr-plugin-epgsearch epgsearch; cd epgsearch; cp -rf /home/`logname`/Vdrrepo/patch_epgsearch.tar.gz /$VDRSRC/epgsearch/; tar -zxvf patch_epgsearch.tar.gz; rm -rf patch_epgsearch.tar.gz; patch -p1 < 10_langinfo-include.diff; sleep 1; patch -p1 < 10_epgsearch_Makefile.patch; sleep 1; patch -p1 < 11_epgsearch_menue.patch; sleep 1; patch -p1 < 12_epgsearch_README.patch; sleep 1; cd ../../..; make plugins; 
#
#
clear
echo ""; echo "               *** Tvguide ***";  sleep 3
apt-get -y install gettext graphicsmagick-libmagick-dev-compat libmagick++-6.q16-dev
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-tvguide /$VDRSRC; mv vdr-plugin-tvguide tvguide; cd tvguide; cp -rf /home/`logname`/Vdrrepo/patch_tvguide.tar.gz /$VDRSRC/tvguide/; tar -zxvf patch_tvguide.tar.gz; rm -rf patch_tvguide.tar.gz;  patch -p1 < 11_tvguide_i18n-it.patch; patch -p1 < 12_tvguide_VDR235.patch; patch -p1 < 13_tvguide_comp_with_last_tvscraper.patch; make; cd ../../..; make plugins; cp -rf $VDRSRC/tvguide/themes/* /etc/vdr/themes/;
#  patch -p1 < 10_tvguide_lib_Magick.patch;
#
echo ""; echo "               *** Iptv ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install libcurl3 libcurl4-gnutls-dev vlc; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-iptv /$VDRSRC; mv vdr-plugin-iptv iptv; cd iptv; cp -rf /home/`logname`/Vdrrepo/patch_iptv.tar.gz /$VDRSRC/iptv; tar -zxvf patch_iptv.tar.gz; rm -rf patch_iptv.tar.gz; patch -p1 < iptv.patch; make; cd ../../..; make plugins; mkdir -p /etc/vdr/plugins/iptv/vlcinput; cp -rf /home/`logname`/Vdrrepo/iptv_conf.tar.gz /$PLUGINS/iptv/vlcinput/; cd $PLUGINS/iptv/vlcinput; tar -zxvf iptv_conf.tar.gz; rm -rf iptv_conf.tar.gz; 
#  
#
clear
echo ""; echo "               *** Externalplayer ***";  sleep 3
cd $VDRSRC; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-externalplayer /$VDRSRC && mv vdr-plugin-externalplayer externalplayer && cp -rf /$SRC/traduzioni/external_it_IT.po /$VDRSRC/externalplayer/po/ && cd externalplayer/po/ && mv external_it_IT.po it_IT.po && cd ../../../.. && make plugins && cp -rf /home/`logname`/Vdrrepo/externalplayer.conf.tar.gz /etc/vdr/plugins/ && cd /etc/vdr/plugins && tar -zxvf externalplayer.conf.tar.gz && rm -rf externalplayer.conf.tar.gz;
clear
#
#
clear
echo ""; echo "               *** Channelscan ***";  sleep 3
cd $VDRSRC; apt-get -y install libboost-iostreams-dev && cp -rf /home/`logname`/Vdrrepo/channelscan /$VDRSRC && cp -rf $VDRSRC/channelscan/script/* /usr/local/bin && cd ../.. && make plugins && cd $PLUGINS && mkdir -p transponders && cp -rf /home/`logname`/Vdrrepo/satellite_pack.tar.gz  $PLUGINS/transponders && cd transponders && tar -zxvf satellite_pack.tar.gz && rm -rf satellite_pack.tar.gz;
#
#
clear
echo ""; echo "               *** Skin Flatplus ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install graphicsmagick-libmagick-dev-compat imagemagick libmagick++-6.q16-dev lm-sensors && cp -rf /home/`logname`/Vdrrepo/skin-flatplus /$VDRSRC/ && cd skin-flatplus && make install && cd /usr/local/lib/vdr/plugins/skinflatplus/widgets/temperatures/ && ln -s temperatures.default temperatures && cd ../system_information && ln -s system_information.ubuntu system_information  && cp -rf /home/`logname`/Vdrrepo/flat_weather.tar.gz ../weather/ && cd ../weather && tar -zxvf flat_weather.tar.gz && rm -rf flat_weather.tar.gz;
# qui sopra c'è da mettere le icone di menù mancanti che sono dentro le skin del Skin Flatplus traducendole e comprimendole
#
clear
echo ""; echo "               *** Skindesigner ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install graphicsmagick-libmagick-dev-compat libxml2-dev librsvg2-dev && cp -rf /home/`logname`/Vdrrepo/vdr-plugin-skindesigner /$VDRSRC/ && mv -f vdr-plugin-skindesigner skindesigner && cd skindesigner && wget https://www.dropbox.com/s/c0p5iqlpq2b1usq/metrixHD-labor5.tar.bz2 && tar xjf metrixHD-labor5.tar.bz2 && mv -f metrixHD-labor5.tar.bz2 /home/`logname`/Vdrrepo/ && cd themes && rm -rf metrixhd*.theme && cp -rf $VDRSRC/skindesigner/metrixHD-labor/themes/* $VDRSRC/skindesigner/themes/ && cd ../skins && rm -rf metrixhd && cp -rf $VDRSRC/skindesigner/metrixHD-labor/metrixhd $VDRSRC/skindesigner/skins/ && cd metrixhd && wget https://www.dropbox.com/s/wfr9pinoiw22vbb/translation_metrixhd.diff.tar.gz && tar -zxvf translation_metrixhd.diff.tar.gz && mv -f translation_metrixhd.diff.tar.gz /home/`logname`/Vdrrepo/ && patch -p1 < translation_metrixhd.diff && rm -rf translation_metrixhd.diff && cd ../.. && cp -rf /home/`logname`/Vdrrepo/patch_skindesigner.tar.gz /$VDRSRC/skindesigner && tar -zxvf patch_skindesigner.tar.gz && rm -rf patch_skindesigner.tar.gz && patch -p1 < 10_skindesigner_scriptsdir.patch && make install && cd /$SHARE/skindesigner/scripts/ && ln -s temperatures.default temperatures && ln -s vdrstats.default vdrstats; 
#  
# 
clear
echo ""; echo "               *** TvGuideng ***"; echo ""; sleep 3
cd $VDRSRC; apt-get -y install libstdc++6 libgcc1 libc6 librsvg2-dev; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-tvguideng /$VDRSRC; mv vdr-plugin-tvguideng tvguideng; cd tvguideng; cp -rf /home/`logname`/Vdrrepo/patch_tvguideng.tar.gz /$VDRSRC/tvguideng/; tar -zxvf patch_tvguideng.tar.gz; rm -rf patch_tvguideng.tar.gz; patch -p1 < tvguideng_235.diff; patch -p1 < tvguideng-0.3.0_fix.diff; patch -p1 < tvguideng-gcc6.patch; cp -rf /$SRC/traduzioni/tvguideng_it_IT.po /$VDRSRC/tvguideng/po/; cd po/; mv tvguideng_it_IT.po it_IT.po; cd ../../../..; make plugins;
#
#
clear
echo ""; echo "               *** Weatherforecast ***";  sleep 3
cd $VDRSRC; apt-get -y install libcurl4-openssl-dev libjansson-dev librsvg2-dev; cp -rf /home/`logname`/Vdrrepo/vdr-plugin-weatherforecast /$VDRSRC; mv vdr-plugin-weatherforecast weatherforecast; cd weatherforecast; cp -rf /home/`logname`/Vdrrepo/patch_weatherforecast.tar.gz /$VDRSRC/weatherforecast/; tar -zxvf patch_weatherforecast.tar.gz; rm -rf patch_weatherforecast.tar.gz; patch -p1 < 10_weatherforecast_debug.patch; sleep 1; patch -p1 < 11_weatherforecast_i18n-it.patch; cd ../../..; make plugins; 
#
#
cd /home/`logname`/Vdrrepo/; chmod -R 777 *; cd $SRC/vdr; make plugins install;

    echo "                    Press Enter to continue ...               "; read enterKey;;
        
     
#############################################################################################################################  
#############################################################################################################################

a1)                                       #########################################
                                          #              Remove VDR-2.4.x         #
                                          #########################################


    clear
    echo "                    Removing VDR 2.4.x"; sleep 4
dpkg -r vdr; rm -rf /etc/vdr; rm -rf /usr/local/share/vdr; rm -rf /usr/local/lib/vdr; rm -rf /var/cache/vdr; cd $SRC; rm -rf vdr vdr-*; cd packages; rm -rf vdr*.deb; rm -rf /usr/local/bin/vdrpoweroff; rm -rf /usr/local/bin/vdrrun;  rm -rf /usr/local/bin/start-vdr-xine.sh; rm -rf /usr/local/bin/start-xinelib-vdr.sh; rm -rf /usr/local/share/vdr; rm -rf /usr/local/bin/start-vdr.sh; rm -rf /home/`logname`/Scrivania/Xinelib.desktop; rm -rf /home/`logname`/Scrivania/Vdr-Xine.desktop; rm -rf /home/`logname`/Scrivania/Vdr.desktop; rm -rf /home/`logname`/Scrivania/KillVdr.desktop; cd $PACKAGES; rm -rf vdr*.deb; rm -rf /usr/share/applications/Xinelib.desktop; rm -rf /usr/share/applications/Vdr-Xine.desktop; rm -rf /usr/share/applications/Vdr.desktop; rm -rf /usr/share/applications/KillVdr.desktop;
    echo "                    Press Enter to continue ...               "; read enterKey;;


#############################################################################################################################  
#############################################################################################################################

b)                                        #########################################
                                          #          Configuring VDR-2.4.x        #
                                          #########################################


clear
					echo "                    Configuring VDR 2.4.x"; sleep 3
clear
					echo "                    Installing true type"; sleep 1
apt-get -y install lirc lirc-x liblircclient-dev;
if [ -d /usr/share/fonts/truetype/vdrsymbols ];
then echo " Fonts $Remind4"; sleep 3;
else cp -rf /home/`logname`/Vdrrepo/vdrsymbols.tar.gz /usr/share/fonts/truetype/; cd /usr/share/fonts/truetype/; tar -zxvf vdrsymbols.tar.gz;
fc-cache -fv
fi;

#############################################################################################################################
#############################################################################################################################

					  #########################################	
					  #         Installing Vdr Icons          #
                                          #########################################

clear
					echo "                    Installing Vdr Icons"; sleep 1
cd $SRC; cp -rf /home/`logname`/Vdrrepo/icone.tar.gz /usr/local/src/; tar -zxvf icone.tar.gz; rm -rf icone.tar.gz;

#############################################################################################################################
#############################################################################################################################

					  #########################################	
					  #     Create start Vdr command line     #
					  #########################################
							
clear
echo "                    Create start Vdr command line"; sleep 1
rm -rf /usr/local/bin/vdrrun; touch /usr/local/bin/vdrrun;

echo '#!/bin/bash

/usr/local/bin/vdr -c /etc/vdr -E /var/vdr -l 3 -u root '$PLUGIN' -s /usr/local/bin/vdrpoweroff ' >> /usr/local/bin/vdrrun && chmod a+x /usr/local/bin/vdrrun
#
					echo "   *** Create start Vdr command line  ***"; sleep 1
clear        
    dialog --title "   ** Create start Vdr command line **   " --infobox "
   ----------------------------------------------
          Create start Vdr command line             
   ----------------------------------------------
        [a]    Vaapidevice                   
        [b]    Softhddevice                   
        [c]    Xineliboutput Nvidia graphic card                             
        [d]    Xineliboutput Intel graphic card 
                                    
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-d]:      "
    read yourch
    case $yourch in
a) sed -i "s|-P'dvbapi'|& -P'vaapidevice -f -a pulse'|" /usr/local/bin/vdrrun && cp -rf /home/`logname`/Vdrrepo/setup16_vaapidevice.tar.gz /etc/vdr/; tar -zxvf setup16_vaapidevice.tar.gz; rm -rf setup16_vaapidevice.tar.gz;;
b) sed -i "s|-P'dvbapi'|& -P'softhddevice -f -v vdpau -w no-hw-decoder'|" /usr/local/bin/vdrrun && cp -rf /home/`logname`/Vdrrepo/setup16_softhddevice.tar.gz /etc/vdr/; tar -zxvf setup16_softhddevice.tar.gz; rm -rf setup16_softhddevice.tar.gz;;
c) sed -i "s|-P'dvbapi'|& -P'xineliboutput --local=sxfe --video=vdpau --hud --audio=alsa --remote=none --post=tvtime:method=Linear,cheap_mode=1,pulldown=0,use_progressive_frame_flag=1'|" /usr/local/bin/vdrrun ;; # && cp -rf /home/`logname`/Vdrrepo/setup16_xineliboutput.tar.gz /etc/vdr/; tar -zxvf setup16_xineliboutput.tar.gz; rm -rf setup16_xineliboutput.tar.gz;;
d) sed -i "s|-P'dvbapi'|& -P'xineliboutput --local=sxfe --video=vaapi --hud --audio=alsa --remote=none --post=tvtime:method=Linear,cheap_mode=1,pulldown=0,use_progressive_frame_flag=1'|" /usr/local/bin/vdrrun ;; # && cp -rf /home/`logname`/Vdrrepo/setup16_xineliboutput.tar.gz /etc/vdr/; tar -zxvf setup16_xineliboutput.tar.gz; rm -rf setup16_xineliboutput.tar.gz;;
esac
#   Permission to execute Vdr       
echo "%`logname` ALL=NOPASSWD: /etc/init.d/vdr" >> /etc/sudoers
#    Creazione /usr/local/bin/vdrpoweroff    
rm -rf /usr/local/bin/vdrpoweroff; touch /usr/local/bin/vdrpoweroff
echo '#!/bin/sh
#file name: Kill Vdr "vdrpoweroff"
killall -9 vdrrun & killall -9 vdr & killall -9 vdr-sxfe & killall -9 vlc 
# & killall -9 oscam & shutdown -h now '  >> /usr/local/bin/vdrpoweroff
# & shutdown -h now 
#
chmod 755 /usr/local/bin/vdrpoweroff
#
#  Create /etc/init.d/vdr           
rm -rf /etc/init.d/vdr; touch /etc/init.d/vdr 
echo '
#!/bin/sh
#
# To be copied to: /etc/init.d
# And type:
### BEGIN INIT INFO
# Provides:          VDR
# Required-Start:   
# Required-Stop:     
# Default-Start:     0 1 2 3 4 5 6
# Default-Stop:     
# Description:       Start, Stop or Restart VDR
### END INIT INFO

# Shell functions sourced from /etc/rc.status:
set -e

# Reset status of this service
# rc_reset
#
echo "Vdr init.d script using: $1" >> /var/log/vdr.log &
case "$1" in
    start)
        echo -n "Start VDR "
       /usr/local/bin/vdrrun >> /var/log/vdr.log &
        # Remember status and be verbose
        ;;
    stop)
        echo -n "Stop VDR "
       killall vdrrun
       killall vdr
       killall vdr-sxfe
        # Remember status and be verbose
        ;;
    restart)
        echo -n "Restart VDR "
        $0 stop
        $0 start

        # Remember status and be quiet
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;
esac
exit 0
' >> /etc/init.d/vdr
chmod 755 /etc/init.d/vdr

   
#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #                  Oscam Setup                   #
                                          ##################################################
                                          
cd /usr/local; mkdir -p etc;                                          
if [ -f /usr/local/etc/oscam.check ];
  then  echo "Oscam is already installed"
else
echo "oscam ALL=(ALL) ALL" >> /etc/sudoers; 
apt-get install libssl.dev libcrypto++-.dev; rm -rf /etc/init.d/oscam; touch /etc/init.d/oscam; 

echo '
#!/bin/sh
#
# To be copied to: /etc/init.d
# And type:
### BEGIN INIT INFO
# Provides:          Oscam
# Required-Start:   
# Required-Stop:     
# Default-Start:     0 1 2 3 4 5 6
# Default-Stop:     
# Description:       Start, Stop or Restart Oscam
### END INIT INFO

# Shell functions sourced from /etc/rc.status:
set -e

# Reset status of this service
# rc_reset
#
echo "Vdr init.d script using: $1" >> /var/log/oscam.log &
case "$1" in
    start)
        echo -n "Start Oscam "
       /usr/local/bin/oscam >> /var/log/oscam.log &
        # Remember status and be verbose
        ;;
    stop)
        echo -n "Kill Oscam "
       killall -9 oscam
        # Remember status and be verbose
        ;;
    restart)
        echo -n "Restart Oscam "
        $0 stop
        $0 start

        # Remember status and be quiet
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;
esac
exit 0
' >> /etc/init.d/oscam; chmod 755 /etc/init.d/oscam; echo "%`logname` ALL=NOPASSWD: /etc/init.d/oscam" >> /etc/sudoers; cd $SRC; mkdir -p oscam; cd oscam; cp -rf /home/`logname`/Vdrrepo/oscam.tar.gz /$SRC/oscam; tar -zxvf oscam.tar.gz; rm -rf oscam.tar.gz;
cp -rf * /usr/local/etc/;
fi
cp -rf /home/`logname`/Vdrrepo/oscam64.tar.gz /usr/local/bin/; cd /usr/local/bin; tar -zxvf oscam64.tar.gz; rm -rf oscam64.tar.gz;
chmod 777 oscam;


#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #           Setup Vdr & Oscam icons              #
                                          ##################################################


				echo "               *** Setup icons  ***"; sleep 3
				echo "               *** Setup Vdr icon  ***"; sleep 1
rm -rf /home/`logname`/Scrivania/Vdr.desktop; rm -rf /usr/share/applications/Vdr.desktop;
if [ -d $SRC/vdr ];
   then
touch /usr/share/applications/Vdr.desktop;  
chmod 777 /usr/share/applications/Vdr.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=Vdr
Description=Start of Vdr
Icon=/usr/local/src/icone/vdr.png
Exec=/usr/local/bin/start-vdr.sh
">> /usr/share/applications/Vdr.desktop;
chmod 777 /usr/share/applications/Vdr.desktop; 

rm -rf /usr/local/bin/start-vdr.sh;
touch /usr/local/bin/start-vdr.sh;
echo "#!/bin/sh

sudo /etc/init.d/vdr start > /dev/null 2>&1" >> /usr/local/bin/start-vdr.sh;
chmod 777 /usr/local/bin/start-vdr.sh;

else echo " Vdr $Remind5"
fi


#############################################################################################################################  

		echo "               *** Setup Kill Vdr icon  ***"; sleep 1
                                          
rm -rf /home/`logname`/Scrivania/KillVdr.desktop; rm -rf /usr/share/applications/KillVdr.desktop;
touch /usr/share/applications/KillVdr.desktop; 
chmod 777 /usr/share/applications/KillVdr.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=KillVdr
Description=Kill Vdr
Icon=/usr/local/src/icone/killvdr.png
Exec=/usr/local/bin/KillVdr.sh
" >> /usr/share/applications/KillVdr.desktop; 
chmod 777 /usr/share/applications/KillVdr.desktop; 

rm -rf /usr/local/bin/KillVdr.sh;
touch /usr/local/bin/KillVdr.sh;
echo '#!/bin/sh

sudo /etc/init.d/vdr stop > /dev/null 2>&1
' >> /usr/local/bin/KillVdr.sh;
chmod 777 /usr/local/bin/KillVdr.sh;


#############################################################################################################################  
                                          
				echo "               *** Setup Oscam icon  ***"; sleep 1

rm -rf /home/`logname`/Scrivania/Oscam.desktop; rm -rf /usr/share/applications/Oscam.desktop;
touch /usr/share/applications/Oscam.desktop;
chmod 777 /usr/share/applications/Oscam.desktop; 
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=Oscam
Description=Oscam Start 
Icon=/usr/local/src/icone/Oscam.png
Exec=/usr/local/bin/start-oscam.sh
" >> /usr/share/applications/Oscam.desktop; 
chmod 777 /usr/share/applications/Oscam.desktop; 

rm -rf /usr/local/bin/start-oscam.sh; 
touch /usr/local/bin/start-oscam.sh; 
echo '#!/bin/sh 
sleep 10
sudo /etc/init.d/oscam start > /dev/null 2>&1
' >> /usr/local/bin/start-oscam.sh; 
chmod 777 /usr/local/bin/start-oscam.sh;


#############################################################################################################################  
                                         
				echo "               *** Setup Kill Oscam icon  ***"; sleep 1

rm -rf /home/`logname`/Scrivania/KillOscam.desktop; rm -rf /usr/share/applications/KillOscam.desktop;
touch /usr/share/applications/KillOscam.desktop; 
chmod 777 /usr/share/applications/KillOscam.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=KillOscam
Description=Kill Oscam
Icon=/usr/local/src/icone/killoscam.png
Exec=/usr/local/bin/KillOscam.sh
" >> /usr/share/applications/KillOscam.desktop; 
sudo chmod 777 /usr/share/applications/KillOscam.desktop; 

rm -rf /usr/local/bin/KillOscam.sh;
touch /usr/local/bin/KillOscam.sh
echo '#!/bin/sh

sudo /etc/init.d/oscam stop > /dev/null 2>&1
' >> /usr/local/bin/KillOscam.sh;
chmod 777 /usr/local/bin/KillOscam.sh;


#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #      Install default Skin for Vdr     #
                                          ##################################################
                                          
                                          
					echo "               *** Install default Skin for Vdr  ***"; sleep 1
if [ -f /etc/vdr/themes/checklcars ];
then echo " Default Skin is already installed"
else cp -rf /home/`logname`/Vdrrepo/lcars_pack.tar.gz /etc/vdr/themes; cd /etc/vdr/themes; tar -zxvf lcars_pack.tar.gz; rm -rf lcars_pack.tar.gz;
fi

#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #               Install Channels logos           #
                                          ##################################################

                            
cd /etc/vdr/plugins/; mkdir -p picon;
#
if [ -f /etc/vdr/logos/2be.png ];
then echo " Logos are already installed"
else
cp -rf /home/`logname`/Vdrrepo/logos.tar.gz /etc/vdr/; cd /etc/vdr/; tar -zxvf logos.tar.gz; rm -rf logos.tar.gz;
fi
sleep 1
ln -s /etc/vdr/plugins/picon liquid-logos4anthra_HD;

#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #                  Diseqc setup                  #
                                          ##################################################
                                          
                                          
rm -rf /etc/vdr/diseqc.conf;
rm -rf /etc/vdr/channels.conf;
					echo "               *** Diseqc setup  ***"; sleep 1
#echo "*** diseqc.conf setup ***"; sleep 3
    clear        
    dialog --title "   ** diseqc.conf setup **   " --infobox "
   ----------------------------------------------
                Diseqc setup             
   ----------------------------------------------
        [a]    Hot Bird 13°E                    
        [b]    Astra 19.2°E                    
        [c]    Dual 13, 19.2°E                  
        [d]    Trial 9, 13, 19.2°E              
        [e]    Trial 13, 16, 19°E               
        [f]    Quadri 13, 19, 23.5, 28.2°E      
        [g]    Quadri 9, 13, 16, 19°E           
        [h]    Terrestrial                  
        [i]    Radio Iptv                  
        
        [z]    Skip                             
        
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-z]:      "
    read yourch
    case $yourch in
a) echo "$MONO13" >> /etc/vdr/diseqc.conf && cp -rf /home/`logname`/Vdrrepo/channels.conf.hotbird.tar.gz /etc/vdr/ && cd /etc/vdr/ && tar -zxvf channels.conf.hotbird.tar.gz && rm -rf channels.conf.hotbird.tar.gz;;
b) echo "$MONO19" >> /etc/vdr/diseqc.conf && cp -rf /home/`logname`/Vdrrepo/channels.conf.astra.tar.gz /etc/vdr/ && cd /etc/vdr/ && tar -zxvf channels.conf.astra.tar.gz && rm -rf channels.conf.astra.tar.gz;;
c) echo "$DUAL" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf && cp -rf /home/`logname`/Vdrrepo/channels.conf.dual.tar.gz /etc/vdr/ && cd /etc/vdr/ && tar -zxvf channels.conf.dual.tar.gz && rm -rf channels.conf.dual.tar.gz;;
d) echo "$TRIAL" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf && cp -rf /home/`logname`/Vdrrepo/channels.conf.trial.tar.gz /etc/vdr/ && cd /etc/vdr/ && tar -zxvf channels.conf.trial.tar.gz && rm -rf channels.conf.trial.tar.gz;;
e) echo "$TRIAL2 Load a channels.conf" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf;;
f) echo "$QUADRI Load a channels.conf" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf;;
g) echo "$QUADRI2 Load a channels.conf" >> /etc/vdr/diseqc.conf && sed -i 's/DiSEqC = 0/DiSEqC = 1/' /etc/vdr/setup.conf;;
h) cd /etc/vdr && cp -rf /home/`logname`/Vdrrepo/channels.conf.terr.tar.gz /etc/vdr/ && cd /etc/vdr/ && tar -zxvf channels.conf.terr.tar.gz && rm -rf channels.conf.terr.tar.gz && mv channels.conf.terr channels.conf;;
i) cd /etc/vdr && cp -rf /home/`logname`/Vdrrepo/channels.conf.radio.tar.gz /etc/vdr/ && cd /etc/vdr/ && tar -zxvf channels.conf.radio.tar.gz && rm -rf channels.conf.radio.tar.gz && mv radio_channels.conf channels.conf;;
esac


#############################################################################################################################  
#############################################################################################################################

                                          ##################################################
                                          #                   Setup remote                 # 
                                          ##################################################
                                          
					echo "               *** Setup remote  ***"; sleep 1
clear        
    dialog --title "   ** Setup remote **   " --infobox "
   ----------------------------------------------
                Setup remote             
   ----------------------------------------------
        [a]    Mce                   
        [b]    Hauppauge                   
        [c]    Skip                             
        
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-c]:      "
    read yourch
    case $yourch in
a) cd /etc/vdr; cp -rf /home/`logname`/Vdrrepo/mce-remote.conf.tar.gz /etc/vdr/; tar -zxvf mce-remote.conf.tar.gz; rm -rf mce-remote.conf.tar.gz;;
b) cd /etc/vdr; cp -rf /home/`logname`/Vdrrepo/hauppauge-remote.conf.tar.gz /etc/vdr/;tar -zxvf hauppauge-remote.conf.tar.gz; rm -rf hauppauge-remote.conf.tar.gz;;
c);;
esac
#
dmesg | grep -i ubuntu > $TEMP/ubuntu
if cat $TEMP/ubuntu | grep "ubuntu1~16.04"; then
   echo "Ubuntu 16.04 detected"; rm -rf $TEMP/ubuntu
cp -rf /usr/share/applications/KillVdr.desktop /home/`logname`/Scrivania/
cp -rf /usr/share/applications/KillOscam.desktop /home/`logname`/Scrivania/
cp -rf /usr/share/applications/Vdr.desktop /home/`logname`/Scrivania/
cp -rf /usr/share/applications/Oscam.desktop /home/`logname`/Scrivania/
	echo "Installation completed";
		else echo "Installation completed";
fi;
sleep 2;
# Start vdr
killall -9 vdr
#
sudo /usr/local/bin/start-vdr.sh
;;    
esac
;; 
    
#############################################################################################################################  
#############################################################################################################################
###                                                                                                                       ###
##                                                                                                                         ##
#                                                                                                                           #
4)                                        #########################################
                                          #     Install && Upgrade Settings       #
                                          #########################################




apt-get -y install unzip;
echo "               *** Install W_scan ***"; sleep 1
cd $SRC; 
if [ -f /$SRC/w_scan/Makefile ];
  then  echo "W_scan $Remind3"
else wget http://wirbel.htpc-forum.de/w_scan/w_scan-20170107.tar.bz2; tar xivf w_scan-20170107.tar.bz2; cp -rf w_scan-20170107.tar.bz2 /home/`logname`/Vdrrepo/; mv w_scan-20170107 w_scan; rm -rf w_scan-20170107.tar.bz2; cd w_scan; wget https://www.dropbox.com/s/omt6155y22a5ft3/patch_w_scan.tar.gz; tar -zxvf patch_w_scan.tar.gz; cp -rf patch_w_scan.tar.gz home/`logname`/Vdrrepo/; rm -rf patch_w_scan.tar.gz; patch -p1 < 10_w-scan_dvb-t2.patch; ./configure; make; make install;
fi
#
echo "               *** Install Vdr-getchannels-0.7.0 ***"; sleep 1
cd $SRC; mkdir -p e2settings; cd e2settings; 
if [ -f $SRC/e2settings/vdr-getchannels/getchannels.py ];
  then  echo "vdr-getchannels-0.7.0 $Remind3"
else git clone https://github.com/fiveten59/vdr-getchannels.git; cp -rf vdr-getchannels /home/`logname`/Vdrrepo/; 
fi
#
    clear        
    dialog --title "   ** Install && Upgrade Settings **   " --infobox "
   --------------------------------------------------------------
                     Setup channell list
   --------------------------------------------------------------
   
              
        ****   Vdr-Getchannels 0.7.0 (Old)   ****
        [a]    Install Settings from Kingofsat  9.0E 
        [b]    Install Settings from Kingofsat 13.0E         
        [c]    Install Settings from Kingofsat 19.2E 
                        
        ****   Sezione W_Scan  ****
        [d]    Install Settings 9.0E - using W_scan                   
        [e]    Install Settings 13.0E - using W_scan              
        [f]    Install Settings 19.2E - using W_scan             
        [g]    Install Terrestrial Settings - using W_scan

        [h]    Download from repo (trial 9 - 13 -19.2E)
        [i]    Download from repo (dual 13 -19.2E)  
        

            
        [z]    Skip 
        
   -------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-z]:      "
    read yourch
    case $yourch in
    

    ##### Vdr-Getchannels 0.7.0 (Old) #####
    a) rm -rf $SRC/e2settings/channels_9.0E.conf && cd $SRC/e2settings/vdr-getchannels && python getchannels.py -l 9.0E -ot channels_9.0E.conf > $SRC/e2settings/channels_9.0E.conf && cp $SRC/e2settings/channels_9.0E.conf /etc/vdr/channels_9.0E.conf;;
    b) rm -rf $SRC/e2settings/channels_13.0E.conf && cd $SRC/e2settings/vdr-getchannels && python getchannels.py -l 13.0E -ot channels_13.0E.conf > $SRC/e2settings/channels_13.0E.conf && cp $SRC/e2settings/channels_13.0E.conf /etc/vdr/channels_13.0E.conf;;
    c) rm -rf $SRC/e2settings/channels_19.2E.conf && cd $SRC/e2settings/vdr-getchannels && python getchannels.py -l 19.2E -ot channels_19.2E.conf > $SRC/e2settings/channels_19.2E.conf && cp $SRC/e2settings/channels_19.2E.conf /etc/vdr/channels_19.2E.conf;;
  
    ##### W_Scan #####
    d) rm -rf /etc/vdr/channels-w_scan-9E0.conf; w_scan -fs -s S9E0 -D0c -o2 >> /etc/vdr/channels-w_scan-9E0.conf;; 
    e) rm -rf /etc/vdr/channels-w_scan-13E0.conf; w_scan -fs -s S13E0 -D1c -o2 >> /etc/vdr/channels-w_scan-13E0.conf;;
    f) rm -rf /etc/vdr/channels-w_scan-19E2.conf; w_scan -fs -s S19E2 -D2c -o2 >> /etc/vdr/channels-w_scan-19E2.conf;;
    g) rm -rf /etc/vdr/channels-dtt.conf; w_scan -ft -c IT >> /etc/vdr/channels-dtt.conf;;

    h) cp -rf /home/`logname`/Vdrrepo/channels.conf.trial.tar.gz /etc/vdr/;;
    i) cp -rf /home/`logname`/Vdrrepo/channels.conf.dual.tar.gz /etc/vdr/;;
    
   ###
    
    z) ;;
    esac
    ;;
   

#############################################################################################################################  
#############################################################################################################################
###                                                                                                                       ###
##                                                                                                                         ##
#                                                                                                                           #
5)                                        ##########################################################
                                          #                      Submenu - KODI                    #
                                          ##########################################################
                  
    clear        
    dialog --title "   ** Install & Setup KODI **   " --infobox "
   --------------------------------------------------------------
                         Install/Remove Kodi
   --------------------------------------------------------------
        
        *****  Install  *****  ..........  *****  Remove  *****
        [a]    Install  ............  [a1]    Remove KODI  
        
        [z]    Skip
      
                   
   -------------------------------------------------------------- " 0 0
    echo -n "        Enter your menu choice = Install [a] ~~ Remove [a1] ~~ Exit [z]:      "
    read yourch
    case $yourch in

a)
rm -rf /home/`logname`/Scrivania/Kodi.desktop; rm -rf /usr/share/applications/Kodi.desktop;
touch /usr/share/applications/Kodi.desktop; 
chmod 777 /usr/share/applications/Kodi.desktop;
echo "[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=Application
Name=Kodi
Description=Kodi Start
Icon=/usr/local/src/icone/kodi.png
Exec=/usr/local/bin/start-kodi-vdr.sh
" >> /usr/share/applications/Kodi.desktop; 

rm -rf /usr/local/bin/start-kodi-vdr.sh;
touch /usr/local/bin/start-kodi-vdr.sh
echo '#!/bin/sh

/bin/sleep 2
kodi 
' >> /usr/local/bin/start-kodi-vdr.sh; 
chmod a+x /usr/local/bin/start-kodi-vdr.sh;
apt-get -y install python-software-properties pkg-config; apt-get -y install software-properties-common

#############################################################################################################################  
#############################################################################################################################

                                          ##########################################################
                                          #                      Install  KODI                     #
                                          ##########################################################
     
    clear
    dialog --title "   ** KODI **   " --infobox "
   ----------------------------------------------
                KODI versions
   ----------------------------------------------
        [a]    Kodi Stable version 
        [b]    Kodi Release Candidate version                                
        [c]    Kodi Development version             
                                     
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-c]:      "
    read yourch
    case $yourch in

a)   sudo add-apt-repository ppa:team-xbmc/ppa; sudo apt-get update; sudo apt-get -y install kodi kodi-pvr-iptvsimple;;
b)   sudo add-apt-repository ppa:team-xbmc/unstable; sudo apt-get update; sudo apt-get -y install kodi kodi-pvr-iptvsimple;;
c)   sudo add-apt-repository ppa:team-xbmc/xbmc-nightly; sudo apt-get update; sudo apt-get -y install kodi kodi-pvr-iptvsimple;;
 esac    
     echo "                    Press Enter to continue ...               "; read enterKey;;

 
    

#############################################################################################################################  
#############################################################################################################################

a1)                                       #########################################
                                          #               Remove KODI             #
                                          #########################################


    clear
    echo "                    Remove KODI"; sleep 4
    apt-get remove kodi*; apt-get purge kodi*; rm -rf ~/.kodi/; sudo add-apt-repository --remove ppa:team-xbmc/xbmc-nightly; sudo add-apt-repository --remove ppa:team-xbmc/ppa; sudo add-apt-repository --remove ppa:team-xbmc/unstable; rm -rf /home/`logname`/Scrivania/Kodi.desktop; rm -rf /usr/share/applications/Kodi.desktop;;
    esac
;;

#############################################################################################################################  
#############################################################################################################################

6)                                        #########################################
                                          #                Utility                #
                                          #########################################


    clear        
    dialog --title "   ** Utility **   " --infobox "
   ----------------------------------------------
                Utility
   ----------------------------------------------

        [a]    Change Vdrrun               
        [b]    Change channell list            
        [c]    Change setup.conf    
        [d]    Change oscam              
        [e]    Reconfigure lirc                        
        [f]    Nautilus  
        
        [z]    Skip    
        
   ---------------------------------------------- " 0 0
    echo -n "        Enter your menu choice  [a-z]:      " 
    read yourch
    case $yourch in

a) gedit /usr/local/bin/vdrrun;;
b) gedit /etc/vdr/channels.conf;;
c) gedit /etc/vdr/setup.conf;;
d) if [ -f /usr/local/etc/oscam.server ];
then gedit /usr/local/etc/oscam.server; gedit /usr/local/etc/oscam.conf; gedit /usr/local/etc/oscam.user;
else echo "Oscam is not installed"
fi;;
e) dpkg-reconfigure lirc;;
f) nautilus;;
z) ;;
esac
;;

   
#############################################################################################################################  
#############################################################################################################################

7)                                        #########################################
                                          #                Exit/Stop              #
                                          #########################################


    clear
    echo ""
    echo ""
    echo ""
    echo ""
    echo "                                                       .-----,        ,.----."
    echo "                                                .-----'       '------'       ',"
    echo "                                              ,'  First ed. by mona66 ® 2010   ',"
    echo "                                              '     Updated and Revision        '"
    echo "                                              ',  by fiveten_59 ® and knap ®    ,'"
    echo "                                              ,'   2013 ~ 2014 ~ 2015 ~ 2016      ',"
    echo "                                             '        Vdr_installer_2.4.0         '"
    echo "                                              ',        by fiveten_59 ®         '"
    echo "                                              ',               2018           ,'"
    echo "                                                '----,      ,----,       ,----'"
    echo "                                                      '----'      '-----'"
    echo "                                                                O"
    echo "                                                                 o "
    echo "                                                                  o  "
    echo "                                                                   °"
    echo "                                                                    °"
    echo "                                                                .88888888:.          "
    echo "                                                              88888888.88888.          "
    echo "                                                            .8888888888888888.          "
    echo "                                                            888888888888888888          "
    echo "                                                            88'..'888'..'88888          "
    echo "                                                            88'  '888'  '88888          "
    echo "                                                            88'..':::'..':8888          "
    echo "                                                            88:::,::,:::::8888          "
    echo "                                                            88':::::::::''8888          "
    echo "                                                           .88  '::::'    8:88.          "
    echo "                                                          8888            '8:888.          "
    echo "                                                        .8888'             '888888.          "
    echo "                                                       .8888:..  .::.  ...:'8888888:.          "
    echo "                                                      .8888.'     :'     ''::'88:88888          "
    echo "                                                     .8888        '         '.888:8888.          "
    echo "                                                    888:8         .           888:88888          "
    echo "                                                  .888:88        .:           888:88888:          "
    echo "                                                  8888888.       ::           88:888888          "
    echo "                                                  '.::.888.      ::          .88888888          "
    echo "                                                 .::::::.888.    ::         :::'8888'.:.          "
    echo "                                                ::::::::::.888   '         .::::::::::::          "
    echo "                                                ::::::::::::.8    '      .:8::::::::::::.          "
    echo "                                              .::::::::::::::.        .:888:::::::::::::          "
    echo "                                              :::::::::::::::88:.__..:88888:::::::::::'          "
    echo "                                               ''.:::::::::::88888888888.88:::::::::'          "
    echo "                                                     '':::_:' -- '' -'-' '':_::::''          "
    echo ""
    echo "                                                     Grazie a tutti e buon divertimento"
    echo "                                                               Have fun :-)"
    echo ""
    exit 0

;;
*) ;;
esac
done
